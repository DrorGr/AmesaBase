2025-10-02 15:49:35.410 +03:00 [WRN] The foreign key property 'LotteryDraw.HouseId1' was created in shadow state because a conflicting property with the simple name 'HouseId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 15:49:35.503 +03:00 [WRN] The foreign key property 'LotteryTicket.HouseId1' was created in shadow state because a conflicting property with the simple name 'HouseId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 15:49:35.504 +03:00 [WRN] The foreign key property 'LotteryTicket.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 15:49:35.504 +03:00 [WRN] The foreign key property 'Transaction.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 15:49:35.505 +03:00 [WRN] The foreign key property 'UserAddress.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 15:49:35.505 +03:00 [WRN] The foreign key property 'UserNotification.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 15:49:35.505 +03:00 [WRN] The foreign key property 'UserPaymentMethod.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 15:49:35.505 +03:00 [WRN] The foreign key property 'UserPhone.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 15:49:35.505 +03:00 [WRN] The foreign key property 'UserPromotion.PromotionId1' was created in shadow state because a conflicting property with the simple name 'PromotionId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 15:49:35.505 +03:00 [WRN] The foreign key property 'UserPromotion.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 15:49:35.505 +03:00 [WRN] The foreign key property 'UserSession.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 15:49:36.370 +03:00 [WRN] The foreign key property 'LotteryDraw.HouseId1' was created in shadow state because a conflicting property with the simple name 'HouseId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 15:49:36.372 +03:00 [WRN] The foreign key property 'LotteryTicket.HouseId1' was created in shadow state because a conflicting property with the simple name 'HouseId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 15:49:36.372 +03:00 [WRN] The foreign key property 'LotteryTicket.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 15:49:36.372 +03:00 [WRN] The foreign key property 'Transaction.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 15:49:36.372 +03:00 [WRN] The foreign key property 'UserAddress.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 15:49:36.373 +03:00 [WRN] The foreign key property 'UserNotification.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 15:49:36.373 +03:00 [WRN] The foreign key property 'UserPaymentMethod.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 15:49:36.373 +03:00 [WRN] The foreign key property 'UserPhone.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 15:49:36.373 +03:00 [WRN] The foreign key property 'UserPromotion.PromotionId1' was created in shadow state because a conflicting property with the simple name 'PromotionId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 15:49:36.373 +03:00 [WRN] The foreign key property 'UserPromotion.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 15:49:36.374 +03:00 [WRN] The foreign key property 'UserSession.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 15:49:47.985 +03:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-10-02 15:49:48.081 +03:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-10-02 15:49:48.177 +03:00 [INF] Generated QR code for lottery result "88640965-ad73-4896-9d64-88316beb1313"
2025-10-02 15:49:48.229 +03:00 [INF] Generated QR code for lottery result "d642990c-8a74-4c0e-9ed7-7609dc36f05c"
2025-10-02 15:49:48.306 +03:00 [INF] Generated QR code for lottery result "774f63ab-c14a-45d7-8255-3afe64c8c96c"
2025-10-02 15:49:48.308 +03:00 [INF] Generated QR code for lottery result "c7d9ad93-876d-4448-91bb-a5dc242f2362"
2025-10-02 15:49:48.308 +03:00 [INF] Generated QR code for lottery result "7553fc34-6b70-49cb-a40d-d93795bf367c"
2025-10-02 15:49:48.309 +03:00 [INF] Generated QR code for lottery result "2d6e1cb9-e829-4898-a647-46126ec3099c"
2025-10-02 15:49:48.309 +03:00 [INF] Generated QR code for lottery result "0d4d8f3f-ad9d-4c53-a59b-a8299b47b076"
2025-10-02 15:49:48.309 +03:00 [INF] Generated QR code for lottery result "1b93da04-2e8e-465d-99a0-3bad605fb1b4"
2025-10-02 15:49:48.309 +03:00 [INF] Generated QR code for lottery result "c58e1610-ec72-4705-84a8-f21a88b18dc6"
2025-10-02 15:49:48.751 +03:00 [ERR] Failed executing DbCommand (2ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Guid), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = Guid), @p8='?' (Size = 36), @p9='?' (DbType = Int32), @p10='?' (Size = 5), @p11='?' (DbType = Decimal), @p12='?' (Size = 297), @p13='?' (Size = 365), @p14='?' (DbType = DateTime), @p15='?' (DbType = DateTime), @p16='?' (Size = 13), @p17='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "lottery_results" ("Id", "ClaimNotes", "ClaimedAt", "CreatedAt", "DrawId", "IsClaimed", "IsVerified", "LotteryId", "PrizeDescription", "PrizePosition", "PrizeType", "PrizeValue", "QRCodeData", "QRCodeImageUrl", "ResultDate", "UpdatedAt", "WinnerTicketNumber", "WinnerUserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
2025-10-02 15:49:48.784 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'AmesaBackend.Data.AmesaDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-10-02 15:49:48.789 +03:00 [ERR] An error occurred while setting up the database
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at AmesaBackend.Services.LotteryResultsSeedingService.SeedLotteryResultsAsync(AmesaDbContext context, IQRCodeService qrCodeService) in C:\Users\dror0\Curser-Repos\AmesaBase\backend\AmesaBackend\Services\LotteryResultsSeedingService.cs:line 141
   at Program.<Main>$(String[] args) in C:\Users\dror0\Curser-Repos\AmesaBase\backend\AmesaBackend\Program.cs:line 236
2025-10-02 15:49:48.810 +03:00 [INF] Starting Amesa Lottery API
2025-10-02 15:49:48.934 +03:00 [INF] Lottery draw service running...
2025-10-02 15:49:48.944 +03:00 [INF] Notification background service running...
2025-10-02 15:49:50.537 +03:00 [INF] Request 73d43e65 started: GET /api/v1/translations/en from ::1
2025-10-02 15:49:50.537 +03:00 [INF] Request b3a3b652 started: OPTIONS /api/v1/houses from ::1
2025-10-02 15:49:50.554 +03:00 [INF] Request b3a3b652 completed: OPTIONS /api/v1/houses - 204 in 35ms
2025-10-02 15:49:50.924 +03:00 [INF] Request 73d43e65 completed: GET /api/v1/translations/en - 200 in 400ms
2025-10-02 15:49:55.851 +03:00 [INF] Request e7f7278b started: GET /api/v1/lotteryresults from ::1
2025-10-02 15:49:56.385 +03:00 [INF] Request e7f7278b completed: GET /api/v1/lotteryresults - 200 in 533ms
2025-10-02 15:49:56.538 +03:00 [INF] Request 23e0d364 started: GET /api/v1/translations/en from ::1
2025-10-02 15:49:56.564 +03:00 [INF] Request 23e0d364 completed: GET /api/v1/translations/en - 200 in 25ms
2025-10-02 15:50:01.333 +03:00 [INF] Request a03fd58c started: GET /api/v1/translations/en from ::1
2025-10-02 15:50:01.338 +03:00 [INF] Request a03fd58c completed: GET /api/v1/translations/en - 200 in 4ms
2025-10-02 15:50:01.430 +03:00 [INF] Request c5b7a857 started: OPTIONS /api/v1/houses from ::1
2025-10-02 15:50:01.430 +03:00 [INF] Request c5b7a857 completed: OPTIONS /api/v1/houses - 204 in 0ms
2025-10-02 15:50:07.538 +03:00 [INF] Request 5ea054c3 started: GET /api/v1/translations/en from ::1
2025-10-02 15:50:07.545 +03:00 [INF] Request 5ea054c3 completed: GET /api/v1/translations/en - 200 in 6ms
2025-10-02 15:50:07.634 +03:00 [INF] Request 174efe7b started: OPTIONS /api/v1/houses from ::1
2025-10-02 15:50:07.636 +03:00 [INF] Request 174efe7b completed: OPTIONS /api/v1/houses - 204 in 1ms
2025-10-02 15:50:13.356 +03:00 [INF] Request 478a1a72 started: GET /api/v1/translations/en from ::1
2025-10-02 15:50:13.365 +03:00 [INF] Request 478a1a72 completed: GET /api/v1/translations/en - 200 in 9ms
2025-10-02 15:50:13.463 +03:00 [INF] Request c7de6210 started: OPTIONS /api/v1/houses from ::1
2025-10-02 15:50:13.464 +03:00 [INF] Request c7de6210 completed: OPTIONS /api/v1/houses - 204 in 1ms
2025-10-02 15:50:15.649 +03:00 [INF] Request 010b0a95 started: GET /api/v1/houses from ::1
2025-10-02 15:50:16.066 +03:00 [INF] Request 010b0a95 completed: GET /api/v1/houses - 200 in 417ms
2025-10-02 15:50:48.957 +03:00 [INF] Notification background service running...
2025-10-02 15:50:49.689 +03:00 [INF] Request 17f0f26a started: GET /api/v1/translations/en from ::1
2025-10-02 15:50:49.697 +03:00 [INF] Request 17f0f26a completed: GET /api/v1/translations/en - 200 in 7ms
2025-10-02 15:50:49.777 +03:00 [INF] Request acd4b156 started: OPTIONS /api/v1/houses from ::1
2025-10-02 15:50:49.778 +03:00 [INF] Request acd4b156 completed: OPTIONS /api/v1/houses - 204 in 1ms
2025-10-02 15:50:55.932 +03:00 [INF] Request 7c5ce215 started: GET /api/v1/translations/en from ::1
2025-10-02 15:50:55.941 +03:00 [INF] Request 7c5ce215 completed: GET /api/v1/translations/en - 200 in 8ms
2025-10-02 15:50:56.098 +03:00 [INF] Request d7ed9bed started: OPTIONS /api/v1/houses from ::1
2025-10-02 15:50:56.099 +03:00 [INF] Request d7ed9bed completed: OPTIONS /api/v1/houses - 204 in 1ms
2025-10-02 15:51:18.777 +03:00 [INF] Request 801cacb6 started: GET /api/v1/translations/en from ::1
2025-10-02 15:51:18.780 +03:00 [INF] Request 801cacb6 completed: GET /api/v1/translations/en - 200 in 3ms
2025-10-02 15:51:18.871 +03:00 [INF] Request 9cc40324 started: OPTIONS /api/v1/houses from ::1
2025-10-02 15:51:18.871 +03:00 [INF] Request 9cc40324 completed: OPTIONS /api/v1/houses - 204 in 0ms
2025-10-02 15:51:26.352 +03:00 [INF] Request 38f76d5e started: GET /api/v1/translations/pl from ::1
2025-10-02 15:51:26.354 +03:00 [INF] Request 38f76d5e completed: GET /api/v1/translations/pl - 200 in 1ms
2025-10-02 15:51:48.969 +03:00 [INF] Notification background service running...
2025-10-02 15:52:20.302 +03:00 [INF] Request df9996ec started: GET /api/v1/translations/en from ::1
2025-10-02 15:52:20.308 +03:00 [INF] Request df9996ec completed: GET /api/v1/translations/en - 200 in 6ms
2025-10-02 15:52:20.477 +03:00 [INF] Request 398716e2 started: GET /api/v1/houses from ::1
2025-10-02 15:52:20.579 +03:00 [INF] Request 398716e2 completed: GET /api/v1/houses - 200 in 101ms
2025-10-02 15:52:48.971 +03:00 [INF] Notification background service running...
2025-10-02 15:53:48.983 +03:00 [INF] Notification background service running...
2025-10-02 15:53:53.222 +03:00 [INF] Request 6cf89ebd started: GET /api/v1/houses from ::1
2025-10-02 15:53:53.333 +03:00 [INF] Request 6cf89ebd completed: GET /api/v1/houses - 200 in 110ms
2025-10-02 15:54:20.099 +03:00 [INF] Request 02bc6d66 started: GET /api/v1/translations/en from ::1
2025-10-02 15:54:20.109 +03:00 [INF] Request 02bc6d66 completed: GET /api/v1/translations/en - 200 in 10ms
2025-10-02 15:54:20.231 +03:00 [INF] Request 5a78c2ce started: OPTIONS /api/v1/houses from ::1
2025-10-02 15:54:20.232 +03:00 [INF] Request 5a78c2ce completed: OPTIONS /api/v1/houses - 204 in 0ms
2025-10-02 15:54:24.788 +03:00 [INF] Request d6db734c started: GET /api/v1/translations/en from ::1
2025-10-02 15:54:24.794 +03:00 [INF] Request d6db734c completed: GET /api/v1/translations/en - 200 in 6ms
2025-10-02 15:54:24.884 +03:00 [INF] Request 811213d1 started: OPTIONS /api/v1/houses from ::1
2025-10-02 15:54:24.885 +03:00 [INF] Request 811213d1 completed: OPTIONS /api/v1/houses - 204 in 1ms
2025-10-02 15:54:34.030 +03:00 [INF] Request 865bf638 started: GET /api/v1/translations/en from ::1
2025-10-02 15:54:34.033 +03:00 [INF] Request 865bf638 completed: GET /api/v1/translations/en - 200 in 2ms
2025-10-02 15:54:34.171 +03:00 [INF] Request 829df1e9 started: OPTIONS /api/v1/houses from ::1
2025-10-02 15:54:34.171 +03:00 [INF] Request 829df1e9 completed: OPTIONS /api/v1/houses - 204 in 0ms
2025-10-02 15:54:48.948 +03:00 [INF] Lottery draw service running...
2025-10-02 15:54:48.993 +03:00 [INF] Notification background service running...
[2025-10-02 15:55:35.964 +03:00 WRN] The foreign key property 'LotteryDraw.HouseId1' was created in shadow state because a conflicting property with the simple name 'HouseId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 15:55:36.028 +03:00 WRN] The foreign key property 'LotteryTicket.HouseId1' was created in shadow state because a conflicting property with the simple name 'HouseId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 15:55:36.029 +03:00 WRN] The foreign key property 'LotteryTicket.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 15:55:36.030 +03:00 WRN] The foreign key property 'Transaction.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 15:55:36.030 +03:00 WRN] The foreign key property 'UserAddress.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 15:55:36.030 +03:00 WRN] The foreign key property 'UserNotification.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 15:55:36.031 +03:00 WRN] The foreign key property 'UserPaymentMethod.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 15:55:36.031 +03:00 WRN] The foreign key property 'UserPhone.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 15:55:36.031 +03:00 WRN] The foreign key property 'UserPromotion.PromotionId1' was created in shadow state because a conflicting property with the simple name 'PromotionId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 15:55:36.032 +03:00 WRN] The foreign key property 'UserPromotion.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 15:55:36.032 +03:00 WRN] The foreign key property 'UserSession.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 15:55:36.650 +03:00 WRN] The foreign key property 'LotteryDraw.HouseId1' was created in shadow state because a conflicting property with the simple name 'HouseId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 15:55:36.651 +03:00 WRN] The foreign key property 'LotteryTicket.HouseId1' was created in shadow state because a conflicting property with the simple name 'HouseId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 15:55:36.652 +03:00 WRN] The foreign key property 'LotteryTicket.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 15:55:36.652 +03:00 WRN] The foreign key property 'Transaction.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 15:55:36.652 +03:00 WRN] The foreign key property 'UserAddress.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 15:55:36.652 +03:00 WRN] The foreign key property 'UserNotification.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 15:55:36.652 +03:00 WRN] The foreign key property 'UserPaymentMethod.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 15:55:36.652 +03:00 WRN] The foreign key property 'UserPhone.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 15:55:36.653 +03:00 WRN] The foreign key property 'UserPromotion.PromotionId1' was created in shadow state because a conflicting property with the simple name 'PromotionId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 15:55:36.653 +03:00 WRN] The foreign key property 'UserPromotion.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 15:55:36.653 +03:00 WRN] The foreign key property 'UserSession.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 15:55:44.672 +03:00 WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased. {"EventId":{"Id":10102,"Name":"Microsoft.EntityFrameworkCore.Query.RowLimitingOperationWithoutOrderByWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Query"}
[2025-10-02 15:55:44.740 +03:00 WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased. {"EventId":{"Id":10102,"Name":"Microsoft.EntityFrameworkCore.Query.RowLimitingOperationWithoutOrderByWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Query"}
[2025-10-02 15:55:44.806 +03:00 INF] Generated QR code for lottery result "0e37780c-4bde-42cc-a071-58739e28c37a" {"SourceContext":"AmesaBackend.Services.QRCodeService"}
[2025-10-02 15:55:44.842 +03:00 INF] Generated QR code for lottery result "29b8457e-2cab-44da-a5c7-269ab546f4a1" {"SourceContext":"AmesaBackend.Services.QRCodeService"}
[2025-10-02 15:55:44.891 +03:00 INF] Generated QR code for lottery result "5e8a214a-9b51-4e7a-8f4b-8f14e708d7ba" {"SourceContext":"AmesaBackend.Services.QRCodeService"}
[2025-10-02 15:55:44.892 +03:00 INF] Generated QR code for lottery result "a3f8955f-8fe6-4294-82bb-8a246460eccb" {"SourceContext":"AmesaBackend.Services.QRCodeService"}
[2025-10-02 15:55:44.893 +03:00 INF] Generated QR code for lottery result "8bf9bf52-7ed4-4f68-af4c-08c2a146a27f" {"SourceContext":"AmesaBackend.Services.QRCodeService"}
[2025-10-02 15:55:44.893 +03:00 INF] Generated QR code for lottery result "ad32f570-f2f5-40ee-8389-a5261647dd79" {"SourceContext":"AmesaBackend.Services.QRCodeService"}
[2025-10-02 15:55:44.893 +03:00 INF] Generated QR code for lottery result "d69fc65b-1dc5-452d-a737-17b4a1d60eb3" {"SourceContext":"AmesaBackend.Services.QRCodeService"}
[2025-10-02 15:55:44.894 +03:00 INF] Generated QR code for lottery result "ef371331-dc98-4639-a7e2-87b2d0e534ea" {"SourceContext":"AmesaBackend.Services.QRCodeService"}
[2025-10-02 15:55:44.894 +03:00 INF] Generated QR code for lottery result "4be69aa5-ccec-4996-a056-425f93087b51" {"SourceContext":"AmesaBackend.Services.QRCodeService"}
[2025-10-02 15:55:45.147 +03:00 ERR] Failed executing DbCommand (3ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Guid), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = Guid), @p8='?' (Size = 36), @p9='?' (DbType = Int32), @p10='?' (Size = 5), @p11='?' (DbType = Decimal), @p12='?' (Size = 297), @p13='?' (Size = 363), @p14='?' (DbType = DateTime), @p15='?' (DbType = DateTime), @p16='?' (Size = 13), @p17='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "lottery_results" ("Id", "ClaimNotes", "ClaimedAt", "CreatedAt", "DrawId", "IsClaimed", "IsVerified", "LotteryId", "PrizeDescription", "PrizePosition", "PrizeType", "PrizeValue", "QRCodeData", "QRCodeImageUrl", "ResultDate", "UpdatedAt", "WinnerTicketNumber", "WinnerUserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17); {"EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command"}
[2025-10-02 15:55:45.162 +03:00 ERR] An exception occurred in the database while saving changes for context type 'AmesaBackend.Data.AmesaDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken) {"EventId":{"Id":10000,"Name":"Microsoft.EntityFrameworkCore.Update.SaveChangesFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Update"}
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
[2025-10-02 15:55:45.168 +03:00 ERR] An error occurred while setting up the database {}
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at AmesaBackend.Services.LotteryResultsSeedingService.SeedLotteryResultsAsync(AmesaDbContext context, IQRCodeService qrCodeService) in C:\Users\dror0\Curser-Repos\AmesaBase\backend\AmesaBackend\Services\LotteryResultsSeedingService.cs:line 141
   at Program.<Main>$(String[] args) in C:\Users\dror0\Curser-Repos\AmesaBase\backend\AmesaBackend\Program.cs:line 236
[2025-10-02 15:55:45.178 +03:00 INF] Starting Amesa Lottery API {}
[2025-10-02 15:55:45.273 +03:00 INF] Lottery draw service running... {"SourceContext":"AmesaBackend.Services.LotteryDrawService"}
[2025-10-02 15:55:45.282 +03:00 INF] Notification background service running... {"SourceContext":"AmesaBackend.Services.NotificationBackgroundService"}
[2025-10-02 15:55:45.856 +03:00 INF] Request 209574e1 started: GET /api/v1/houses from ::1 {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/houses","ConnectionId":"0HNG1MC0CT0B7"}
[2025-10-02 15:55:46.779 +03:00 INF] Request 209574e1 completed: GET /api/v1/houses - 200 in 932ms {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/houses","ConnectionId":"0HNG1MC0CT0B7"}
[2025-10-02 15:56:06.292 +03:00 INF] Request 0dfc0e9e started: GET /api/v1/translations/en from ::1 {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/en","ConnectionId":"0HNG1MC0CT0B8"}
[2025-10-02 15:56:06.380 +03:00 INF] Request 4d2b6938 started: OPTIONS /api/v1/houses from ::1 {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/houses","ConnectionId":"0HNG1MC0CT0B9"}
[2025-10-02 15:56:06.387 +03:00 INF] Request 4d2b6938 completed: OPTIONS /api/v1/houses - 204 in 6ms {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/houses","ConnectionId":"0HNG1MC0CT0B9"}
[2025-10-02 15:56:06.476 +03:00 INF] Request 0dfc0e9e completed: GET /api/v1/translations/en - 200 in 185ms {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/en","ConnectionId":"0HNG1MC0CT0B8"}
[2025-10-02 15:56:29.911 +03:00 INF] Request dd090026 started: GET /api/v1/translations/en from ::1 {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/en","ConnectionId":"0HNG1MC0CT0BA"}
[2025-10-02 15:56:29.930 +03:00 INF] Request dd090026 completed: GET /api/v1/translations/en - 200 in 18ms {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/en","ConnectionId":"0HNG1MC0CT0BA"}
[2025-10-02 15:56:45.294 +03:00 INF] Notification background service running... {"SourceContext":"AmesaBackend.Services.NotificationBackgroundService"}
[2025-10-02 15:56:55.445 +03:00 INF] Request 5b0edb38 started: GET /api/v1/translations/en from ::1 {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/en","ConnectionId":"0HNG1MC0CT0B8"}
[2025-10-02 15:56:55.449 +03:00 INF] Request 5b0edb38 completed: GET /api/v1/translations/en - 200 in 4ms {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/en","ConnectionId":"0HNG1MC0CT0B8"}
[2025-10-02 15:56:55.527 +03:00 INF] Request 43b0f946 started: OPTIONS /api/v1/houses from ::1 {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/houses","ConnectionId":"0HNG1MC0CT0B8"}
[2025-10-02 15:56:55.527 +03:00 INF] Request 43b0f946 completed: OPTIONS /api/v1/houses - 204 in 0ms {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/houses","ConnectionId":"0HNG1MC0CT0B8"}
[2025-10-02 15:57:18.643 +03:00 INF] Request 61ff25d7 started: GET /api/v1/translations/en from ::1 {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/en","ConnectionId":"0HNG1MC0CT0BD"}
[2025-10-02 15:57:18.655 +03:00 INF] Request 61ff25d7 completed: GET /api/v1/translations/en - 200 in 12ms {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/en","ConnectionId":"0HNG1MC0CT0BD"}
[2025-10-02 15:57:45.305 +03:00 INF] Notification background service running... {"SourceContext":"AmesaBackend.Services.NotificationBackgroundService"}
[2025-10-02 15:58:06.465 +03:00 INF] Request 8ca4efac started: GET /api/v1/translations/en from ::1 {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/en","ConnectionId":"0HNG1MC0CT0B8"}
[2025-10-02 15:58:06.468 +03:00 INF] Request 8ca4efac completed: GET /api/v1/translations/en - 200 in 3ms {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/en","ConnectionId":"0HNG1MC0CT0B8"}
[2025-10-02 15:58:06.588 +03:00 INF] Request e08d8517 started: OPTIONS /api/v1/houses from ::1 {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/houses","ConnectionId":"0HNG1MC0CT0B8"}
[2025-10-02 15:58:06.589 +03:00 INF] Request e08d8517 completed: OPTIONS /api/v1/houses - 204 in 1ms {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/houses","ConnectionId":"0HNG1MC0CT0B8"}
[2025-10-02 15:58:10.443 +03:00 INF] Request e1b03632 started: GET /api/v1/translations/en from ::1 {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/en","ConnectionId":"0HNG1MC0CT0B8"}
[2025-10-02 15:58:10.449 +03:00 INF] Request e1b03632 completed: GET /api/v1/translations/en - 200 in 5ms {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/en","ConnectionId":"0HNG1MC0CT0B8"}
[2025-10-02 15:58:10.523 +03:00 INF] Request 0d6d49d5 started: OPTIONS /api/v1/houses from ::1 {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/houses","ConnectionId":"0HNG1MC0CT0B8"}
[2025-10-02 15:58:10.524 +03:00 INF] Request 0d6d49d5 completed: OPTIONS /api/v1/houses - 204 in 0ms {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/houses","ConnectionId":"0HNG1MC0CT0B8"}
[2025-10-02 15:58:15.250 +03:00 INF] Request cd80c855 started: GET /api/v1/translations/en from ::1 {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/en","ConnectionId":"0HNG1MC0CT0B8"}
[2025-10-02 15:58:15.256 +03:00 INF] Request cd80c855 completed: GET /api/v1/translations/en - 200 in 5ms {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/en","ConnectionId":"0HNG1MC0CT0B8"}
[2025-10-02 15:58:15.313 +03:00 INF] Request 4e7e6e34 started: OPTIONS /api/v1/houses from ::1 {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/houses","ConnectionId":"0HNG1MC0CT0B8"}
[2025-10-02 15:58:15.313 +03:00 INF] Request 4e7e6e34 completed: OPTIONS /api/v1/houses - 204 in 0ms {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/houses","ConnectionId":"0HNG1MC0CT0B8"}
