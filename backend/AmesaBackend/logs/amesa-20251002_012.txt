2025-10-02 16:29:03.560 +03:00 [WRN] The foreign key property 'LotteryDraw.HouseId1' was created in shadow state because a conflicting property with the simple name 'HouseId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 16:29:03.639 +03:00 [WRN] The foreign key property 'LotteryTicket.HouseId1' was created in shadow state because a conflicting property with the simple name 'HouseId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 16:29:03.641 +03:00 [WRN] The foreign key property 'LotteryTicket.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 16:29:03.641 +03:00 [WRN] The foreign key property 'Transaction.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 16:29:03.642 +03:00 [WRN] The foreign key property 'UserAddress.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 16:29:03.642 +03:00 [WRN] The foreign key property 'UserNotification.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 16:29:03.642 +03:00 [WRN] The foreign key property 'UserPaymentMethod.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 16:29:03.643 +03:00 [WRN] The foreign key property 'UserPhone.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 16:29:03.643 +03:00 [WRN] The foreign key property 'UserPromotion.PromotionId1' was created in shadow state because a conflicting property with the simple name 'PromotionId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 16:29:03.643 +03:00 [WRN] The foreign key property 'UserPromotion.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 16:29:03.643 +03:00 [WRN] The foreign key property 'UserSession.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 16:29:04.521 +03:00 [WRN] The foreign key property 'LotteryDraw.HouseId1' was created in shadow state because a conflicting property with the simple name 'HouseId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 16:29:04.521 +03:00 [WRN] The foreign key property 'LotteryTicket.HouseId1' was created in shadow state because a conflicting property with the simple name 'HouseId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 16:29:04.521 +03:00 [WRN] The foreign key property 'LotteryTicket.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 16:29:04.521 +03:00 [WRN] The foreign key property 'Transaction.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 16:29:04.522 +03:00 [WRN] The foreign key property 'UserAddress.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 16:29:04.522 +03:00 [WRN] The foreign key property 'UserNotification.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 16:29:04.522 +03:00 [WRN] The foreign key property 'UserPaymentMethod.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 16:29:04.523 +03:00 [WRN] The foreign key property 'UserPhone.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 16:29:04.523 +03:00 [WRN] The foreign key property 'UserPromotion.PromotionId1' was created in shadow state because a conflicting property with the simple name 'PromotionId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 16:29:04.524 +03:00 [WRN] The foreign key property 'UserPromotion.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 16:29:04.524 +03:00 [WRN] The foreign key property 'UserSession.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 16:29:15.430 +03:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-10-02 16:29:15.541 +03:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-10-02 16:29:15.683 +03:00 [INF] Generated QR code for lottery result "3286d676-687b-473a-a7cb-a12085708cf1"
2025-10-02 16:29:15.754 +03:00 [INF] Generated QR code for lottery result "c82083cd-61e7-4e31-a67d-d7fa96830993"
2025-10-02 16:29:15.871 +03:00 [INF] Generated QR code for lottery result "eef1be99-9ca8-4fc5-a055-c06311f4a5c6"
2025-10-02 16:29:15.873 +03:00 [INF] Generated QR code for lottery result "a24bd37e-8384-4eab-8798-7952211aaada"
2025-10-02 16:29:15.875 +03:00 [INF] Generated QR code for lottery result "520b6cc5-6d1a-49a3-b6dc-65b16fd33226"
2025-10-02 16:29:15.876 +03:00 [INF] Generated QR code for lottery result "00534d67-ecc6-46b9-bb73-63fdd7b7d891"
2025-10-02 16:29:15.876 +03:00 [INF] Generated QR code for lottery result "03800879-c958-4b61-a6c2-3580c4899080"
2025-10-02 16:29:15.877 +03:00 [INF] Generated QR code for lottery result "094a467f-c2b4-41fc-a86a-51b5beaeb5dd"
2025-10-02 16:29:15.877 +03:00 [INF] Generated QR code for lottery result "f64d8d6f-25b6-4bc0-818f-ca5538f60cda"
2025-10-02 16:29:16.456 +03:00 [ERR] Failed executing DbCommand (3ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Guid), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = Guid), @p8='?' (Size = 36), @p9='?' (DbType = Int32), @p10='?' (Size = 7), @p11='?' (DbType = Decimal), @p12='?' (Size = 297), @p13='?' (Size = 363), @p14='?' (DbType = DateTime), @p15='?' (DbType = DateTime), @p16='?' (Size = 13), @p17='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "lottery_results" ("Id", "ClaimNotes", "ClaimedAt", "CreatedAt", "DrawId", "IsClaimed", "IsVerified", "LotteryId", "PrizeDescription", "PrizePosition", "PrizeType", "PrizeValue", "QRCodeData", "QRCodeImageUrl", "ResultDate", "UpdatedAt", "WinnerTicketNumber", "WinnerUserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
2025-10-02 16:29:16.482 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'AmesaBackend.Data.AmesaDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-10-02 16:29:16.490 +03:00 [ERR] An error occurred while setting up the database
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at AmesaBackend.Services.LotteryResultsSeedingService.SeedLotteryResultsAsync(AmesaDbContext context, IQRCodeService qrCodeService) in C:\Users\dror0\Curser-Repos\AmesaBase\backend\AmesaBackend\Services\LotteryResultsSeedingService.cs:line 141
   at Program.<Main>$(String[] args) in C:\Users\dror0\Curser-Repos\AmesaBase\backend\AmesaBackend\Program.cs:line 236
2025-10-02 16:29:16.514 +03:00 [INF] Starting Amesa Lottery API
2025-10-02 16:29:16.600 +03:00 [INF] Lottery draw service running...
2025-10-02 16:29:16.604 +03:00 [INF] Notification background service running...
2025-10-02 16:29:58.410 +03:00 [INF] Request cf902de8 started: GET /api/v1/translations/en from ::1
2025-10-02 16:29:58.735 +03:00 [INF] Request cf902de8 completed: GET /api/v1/translations/en - 200 in 343ms
2025-10-02 16:29:58.806 +03:00 [INF] Request 9b59346e started: GET /api/v1/translations/en from ::1
2025-10-02 16:29:58.938 +03:00 [INF] Request 9b59346e completed: GET /api/v1/translations/en - 200 in 131ms
2025-10-02 16:29:59.191 +03:00 [INF] Request be436818 started: GET /api/v1/translations/pl from ::1
2025-10-02 16:29:59.207 +03:00 [INF] Request be436818 completed: GET /api/v1/translations/pl - 200 in 16ms
2025-10-02 16:30:16.609 +03:00 [INF] Notification background service running...
2025-10-02 16:30:24.997 +03:00 [INF] Request f6fa10b0 started: GET /api/v1/translations/en from ::1
2025-10-02 16:30:25.016 +03:00 [INF] Request f6fa10b0 completed: GET /api/v1/translations/en - 200 in 19ms
2025-10-02 16:30:25.053 +03:00 [INF] Request 82e612e7 started: OPTIONS /api/v1/houses from ::1
2025-10-02 16:30:25.054 +03:00 [INF] Request 82e612e7 completed: OPTIONS /api/v1/houses - 204 in 1ms
2025-10-02 16:30:25.068 +03:00 [INF] Request 2b9b536c started: GET /api/v1/houses from ::1
2025-10-02 16:30:25.418 +03:00 [INF] Request 2b9b536c completed: GET /api/v1/houses - 200 in 350ms
2025-10-02 16:30:28.227 +03:00 [INF] Request 78d26c4c started: GET /api/v1/translations/pl from ::1
2025-10-02 16:30:28.242 +03:00 [INF] Request 78d26c4c completed: GET /api/v1/translations/pl - 200 in 15ms
2025-10-02 16:30:29.694 +03:00 [INF] Request f894f500 started: GET /api/v1/translations/en from ::1
2025-10-02 16:30:29.699 +03:00 [INF] Request f894f500 completed: GET /api/v1/translations/en - 200 in 5ms
2025-10-02 16:30:30.800 +03:00 [INF] Request 231e3b59 started: GET /api/v1/translations/en from ::1
2025-10-02 16:30:30.809 +03:00 [INF] Request 231e3b59 completed: GET /api/v1/translations/en - 200 in 8ms
2025-10-02 16:30:30.847 +03:00 [INF] Request 0842692b started: OPTIONS /api/v1/houses from ::1
2025-10-02 16:30:30.849 +03:00 [INF] Request 0842692b completed: OPTIONS /api/v1/houses - 204 in 2ms
2025-10-02 16:30:30.856 +03:00 [INF] Request a8a19a27 started: GET /api/v1/houses from ::1
2025-10-02 16:30:30.925 +03:00 [INF] Request a8a19a27 completed: GET /api/v1/houses - 200 in 68ms
2025-10-02 16:30:34.169 +03:00 [INF] Request f6a8adf0 started: GET /api/v1/translations/pl from ::1
2025-10-02 16:30:34.173 +03:00 [INF] Request f6a8adf0 completed: GET /api/v1/translations/pl - 200 in 4ms
2025-10-02 16:30:39.022 +03:00 [INF] Request 187c641e started: GET /api/v1/translations/en from ::1
2025-10-02 16:30:39.026 +03:00 [INF] Request 187c641e completed: GET /api/v1/translations/en - 200 in 3ms
2025-10-02 16:31:16.619 +03:00 [INF] Notification background service running...
2025-10-02 16:32:16.622 +03:00 [INF] Notification background service running...
2025-10-02 16:33:02.594 +03:00 [INF] Request 20b86b55 started: GET /api/v1/translations/en from ::1
2025-10-02 16:33:02.597 +03:00 [INF] Request 20b86b55 completed: GET /api/v1/translations/en - 200 in 3ms
2025-10-02 16:33:02.704 +03:00 [INF] Request db76006a started: OPTIONS /api/v1/houses from ::1
2025-10-02 16:33:02.705 +03:00 [INF] Request db76006a completed: OPTIONS /api/v1/houses - 204 in 1ms
2025-10-02 16:33:02.732 +03:00 [INF] Request 64d4deac started: GET /api/v1/houses from ::1
2025-10-02 16:33:02.867 +03:00 [INF] Request 64d4deac completed: GET /api/v1/houses - 200 in 135ms
2025-10-02 16:33:11.835 +03:00 [INF] Request d0e1a44f started: GET /api/v1/translations/pl from ::1
2025-10-02 16:33:11.841 +03:00 [INF] Request d0e1a44f completed: GET /api/v1/translations/pl - 200 in 6ms
2025-10-02 16:33:14.723 +03:00 [INF] Request b4711c2f started: GET /api/v1/translations/en from ::1
2025-10-02 16:33:14.726 +03:00 [INF] Request b4711c2f completed: GET /api/v1/translations/en - 200 in 2ms
2025-10-02 16:33:16.635 +03:00 [INF] Notification background service running...
2025-10-02 16:33:19.795 +03:00 [INF] Request 2338dc96 started: GET /api/v1/translations/en from ::1
2025-10-02 16:33:19.799 +03:00 [INF] Request 2338dc96 completed: GET /api/v1/translations/en - 200 in 4ms
2025-10-02 16:33:19.912 +03:00 [INF] Request 6b2ed686 started: OPTIONS /api/v1/houses from ::1
2025-10-02 16:33:19.914 +03:00 [INF] Request 6b2ed686 completed: OPTIONS /api/v1/houses - 204 in 2ms
2025-10-02 16:33:19.924 +03:00 [INF] Request aedf2e24 started: GET /api/v1/houses from ::1
2025-10-02 16:33:20.053 +03:00 [INF] Request aedf2e24 completed: GET /api/v1/houses - 200 in 129ms
2025-10-02 16:33:21.997 +03:00 [INF] Request 4775c4d9 started: GET /api/v1/translations/pl from ::1
2025-10-02 16:33:22.011 +03:00 [INF] Request 4775c4d9 completed: GET /api/v1/translations/pl - 200 in 13ms
2025-10-02 16:33:23.469 +03:00 [INF] Request 6f5ed12c started: GET /api/v1/translations/en from ::1
2025-10-02 16:33:23.479 +03:00 [INF] Request 6f5ed12c completed: GET /api/v1/translations/en - 200 in 9ms
[2025-10-02 16:34:07.129 +03:00 WRN] The foreign key property 'LotteryDraw.HouseId1' was created in shadow state because a conflicting property with the simple name 'HouseId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 16:34:07.228 +03:00 WRN] The foreign key property 'LotteryTicket.HouseId1' was created in shadow state because a conflicting property with the simple name 'HouseId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 16:34:07.232 +03:00 WRN] The foreign key property 'LotteryTicket.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 16:34:07.233 +03:00 WRN] The foreign key property 'Transaction.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 16:34:07.233 +03:00 WRN] The foreign key property 'UserAddress.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 16:34:07.233 +03:00 WRN] The foreign key property 'UserNotification.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 16:34:07.233 +03:00 WRN] The foreign key property 'UserPaymentMethod.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 16:34:07.234 +03:00 WRN] The foreign key property 'UserPhone.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 16:34:07.234 +03:00 WRN] The foreign key property 'UserPromotion.PromotionId1' was created in shadow state because a conflicting property with the simple name 'PromotionId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 16:34:07.234 +03:00 WRN] The foreign key property 'UserPromotion.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 16:34:07.234 +03:00 WRN] The foreign key property 'UserSession.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 16:34:07.977 +03:00 WRN] The foreign key property 'LotteryDraw.HouseId1' was created in shadow state because a conflicting property with the simple name 'HouseId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 16:34:07.978 +03:00 WRN] The foreign key property 'LotteryTicket.HouseId1' was created in shadow state because a conflicting property with the simple name 'HouseId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 16:34:07.978 +03:00 WRN] The foreign key property 'LotteryTicket.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 16:34:07.979 +03:00 WRN] The foreign key property 'Transaction.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 16:34:07.979 +03:00 WRN] The foreign key property 'UserAddress.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 16:34:07.980 +03:00 WRN] The foreign key property 'UserNotification.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 16:34:07.980 +03:00 WRN] The foreign key property 'UserPaymentMethod.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 16:34:07.980 +03:00 WRN] The foreign key property 'UserPhone.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 16:34:07.980 +03:00 WRN] The foreign key property 'UserPromotion.PromotionId1' was created in shadow state because a conflicting property with the simple name 'PromotionId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 16:34:07.980 +03:00 WRN] The foreign key property 'UserPromotion.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 16:34:07.980 +03:00 WRN] The foreign key property 'UserSession.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 16:34:16.694 +03:00 WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased. {"EventId":{"Id":10102,"Name":"Microsoft.EntityFrameworkCore.Query.RowLimitingOperationWithoutOrderByWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Query"}
[2025-10-02 16:34:16.769 +03:00 WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased. {"EventId":{"Id":10102,"Name":"Microsoft.EntityFrameworkCore.Query.RowLimitingOperationWithoutOrderByWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Query"}
[2025-10-02 16:34:16.848 +03:00 INF] Generated QR code for lottery result "1894c9a3-c5e3-4a79-95d5-60aefb52d109" {"SourceContext":"AmesaBackend.Services.QRCodeService"}
[2025-10-02 16:34:16.899 +03:00 INF] Generated QR code for lottery result "35fbee93-5d05-4f14-9bf8-f8293f7dd256" {"SourceContext":"AmesaBackend.Services.QRCodeService"}
[2025-10-02 16:34:16.965 +03:00 INF] Generated QR code for lottery result "d1f7c626-aa3a-403d-a0cc-7c9431e67fe6" {"SourceContext":"AmesaBackend.Services.QRCodeService"}
[2025-10-02 16:34:16.966 +03:00 INF] Generated QR code for lottery result "36325e74-f042-454f-94fb-99e5e6bd72cc" {"SourceContext":"AmesaBackend.Services.QRCodeService"}
[2025-10-02 16:34:16.967 +03:00 INF] Generated QR code for lottery result "d9b8284f-0524-43e0-a3cb-2a85f11e1a88" {"SourceContext":"AmesaBackend.Services.QRCodeService"}
[2025-10-02 16:34:16.967 +03:00 INF] Generated QR code for lottery result "2c330975-0040-483f-926c-9501a97aa51f" {"SourceContext":"AmesaBackend.Services.QRCodeService"}
[2025-10-02 16:34:16.967 +03:00 INF] Generated QR code for lottery result "eb4876d5-f7ee-46bd-9854-b40485781688" {"SourceContext":"AmesaBackend.Services.QRCodeService"}
[2025-10-02 16:34:16.967 +03:00 INF] Generated QR code for lottery result "812407dc-2de8-4a4b-8753-9fcdfb01b30d" {"SourceContext":"AmesaBackend.Services.QRCodeService"}
[2025-10-02 16:34:16.967 +03:00 INF] Generated QR code for lottery result "d69def6e-b707-4f92-ac3d-b1423d15dd69" {"SourceContext":"AmesaBackend.Services.QRCodeService"}
[2025-10-02 16:34:17.218 +03:00 ERR] Failed executing DbCommand (3ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Guid), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = Guid), @p8='?' (Size = 36), @p9='?' (DbType = Int32), @p10='?' (Size = 5), @p11='?' (DbType = Decimal), @p12='?' (Size = 297), @p13='?' (Size = 367), @p14='?' (DbType = DateTime), @p15='?' (DbType = DateTime), @p16='?' (Size = 13), @p17='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "lottery_results" ("Id", "ClaimNotes", "ClaimedAt", "CreatedAt", "DrawId", "IsClaimed", "IsVerified", "LotteryId", "PrizeDescription", "PrizePosition", "PrizeType", "PrizeValue", "QRCodeData", "QRCodeImageUrl", "ResultDate", "UpdatedAt", "WinnerTicketNumber", "WinnerUserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17); {"EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command"}
[2025-10-02 16:34:17.249 +03:00 ERR] An exception occurred in the database while saving changes for context type 'AmesaBackend.Data.AmesaDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken) {"EventId":{"Id":10000,"Name":"Microsoft.EntityFrameworkCore.Update.SaveChangesFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Update"}
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
[2025-10-02 16:34:17.258 +03:00 ERR] An error occurred while setting up the database {}
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at AmesaBackend.Services.LotteryResultsSeedingService.SeedLotteryResultsAsync(AmesaDbContext context, IQRCodeService qrCodeService) in C:\Users\dror0\Curser-Repos\AmesaBase\backend\AmesaBackend\Services\LotteryResultsSeedingService.cs:line 141
   at Program.<Main>$(String[] args) in C:\Users\dror0\Curser-Repos\AmesaBase\backend\AmesaBackend\Program.cs:line 236
[2025-10-02 16:34:17.280 +03:00 INF] Starting Amesa Lottery API {}
[2025-10-02 16:34:17.363 +03:00 INF] Lottery draw service running... {"SourceContext":"AmesaBackend.Services.LotteryDrawService"}
[2025-10-02 16:34:17.368 +03:00 INF] Notification background service running... {"SourceContext":"AmesaBackend.Services.NotificationBackgroundService"}
[2025-10-02 16:34:20.070 +03:00 INF] Request 09ebea37 started: GET /api/v1/translations/en from ::1 {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/en","ConnectionId":"0HNG1N1I2N5RJ"}
[2025-10-02 16:34:20.339 +03:00 INF] Request 09ebea37 completed: GET /api/v1/translations/en - 200 in 279ms {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/en","ConnectionId":"0HNG1N1I2N5RJ"}
[2025-10-02 16:34:20.409 +03:00 INF] Request 84eba01e started: GET /api/v1/translations/en from ::1 {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/en","ConnectionId":"0HNG1N1I2N5RJ"}
[2025-10-02 16:34:20.518 +03:00 INF] Request 84eba01e completed: GET /api/v1/translations/en - 200 in 108ms {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/en","ConnectionId":"0HNG1N1I2N5RJ"}
[2025-10-02 16:34:20.744 +03:00 INF] Request e6658086 started: GET /api/v1/translations/pl from ::1 {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/pl","ConnectionId":"0HNG1N1I2N5RJ"}
[2025-10-02 16:34:20.757 +03:00 INF] Request e6658086 completed: GET /api/v1/translations/pl - 200 in 13ms {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/pl","ConnectionId":"0HNG1N1I2N5RJ"}
[2025-10-02 16:34:25.231 +03:00 INF] Request fa1d0fdd started: GET /api/v1/translations/en from ::1 {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/en","ConnectionId":"0HNG1N1I2N5RK"}
[2025-10-02 16:34:25.284 +03:00 INF] Request fa1d0fdd completed: GET /api/v1/translations/en - 200 in 52ms {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/en","ConnectionId":"0HNG1N1I2N5RK"}
[2025-10-02 16:34:25.396 +03:00 INF] Request 93c76467 started: OPTIONS /api/v1/houses from ::1 {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/houses","ConnectionId":"0HNG1N1I2N5RK"}
[2025-10-02 16:34:25.398 +03:00 INF] Request 93c76467 completed: OPTIONS /api/v1/houses - 204 in 2ms {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/houses","ConnectionId":"0HNG1N1I2N5RK"}
[2025-10-02 16:34:25.423 +03:00 INF] Request ebaef65f started: GET /api/v1/houses from ::1 {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/houses","ConnectionId":"0HNG1N1I2N5RK"}
[2025-10-02 16:34:25.938 +03:00 INF] Request ebaef65f completed: GET /api/v1/houses - 200 in 514ms {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/houses","ConnectionId":"0HNG1N1I2N5RK"}
[2025-10-02 16:35:17.368 +03:00 INF] Notification background service running... {"SourceContext":"AmesaBackend.Services.NotificationBackgroundService"}
[2025-10-02 16:36:17.375 +03:00 INF] Notification background service running... {"SourceContext":"AmesaBackend.Services.NotificationBackgroundService"}
[2025-10-02 16:37:17.386 +03:00 INF] Notification background service running... {"SourceContext":"AmesaBackend.Services.NotificationBackgroundService"}
[2025-10-02 16:38:17.386 +03:00 INF] Notification background service running... {"SourceContext":"AmesaBackend.Services.NotificationBackgroundService"}
[2025-10-02 16:39:17.374 +03:00 INF] Lottery draw service running... {"SourceContext":"AmesaBackend.Services.LotteryDrawService"}
[2025-10-02 16:39:17.389 +03:00 INF] Notification background service running... {"SourceContext":"AmesaBackend.Services.NotificationBackgroundService"}
[2025-10-02 16:40:17.396 +03:00 INF] Notification background service running... {"SourceContext":"AmesaBackend.Services.NotificationBackgroundService"}
[2025-10-02 16:40:59.376 +03:00 INF] Request f6277e87 started: GET /api/v1/translations/en from ::1 {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/en","ConnectionId":"0HNG1N1I2N5RL"}
[2025-10-02 16:40:59.385 +03:00 INF] Request f6277e87 completed: GET /api/v1/translations/en - 200 in 8ms {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/en","ConnectionId":"0HNG1N1I2N5RL"}
[2025-10-02 16:40:59.604 +03:00 INF] Request f82058bb started: OPTIONS /api/v1/houses from ::1 {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/houses","ConnectionId":"0HNG1N1I2N5RL"}
[2025-10-02 16:40:59.606 +03:00 INF] Request f82058bb completed: OPTIONS /api/v1/houses - 204 in 1ms {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/houses","ConnectionId":"0HNG1N1I2N5RL"}
[2025-10-02 16:40:59.611 +03:00 INF] Request 732bc208 started: GET /api/v1/houses from ::1 {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/houses","ConnectionId":"0HNG1N1I2N5RL"}
[2025-10-02 16:40:59.728 +03:00 INF] Request 732bc208 completed: GET /api/v1/houses - 200 in 117ms {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/houses","ConnectionId":"0HNG1N1I2N5RL"}
[2025-10-02 16:41:17.401 +03:00 INF] Notification background service running... {"SourceContext":"AmesaBackend.Services.NotificationBackgroundService"}
[2025-10-02 16:41:31.806 +03:00 INF] Request 42ad4c28 started: GET /api/v1/translations/en from ::1 {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/en","ConnectionId":"0HNG1N1I2N5RL"}
[2025-10-02 16:41:31.816 +03:00 INF] Request 42ad4c28 completed: GET /api/v1/translations/en - 200 in 10ms {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/en","ConnectionId":"0HNG1N1I2N5RL"}
[2025-10-02 16:41:32.073 +03:00 INF] Request 6f1b7bbd started: OPTIONS /api/v1/houses from ::1 {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/houses","ConnectionId":"0HNG1N1I2N5RL"}
[2025-10-02 16:41:32.075 +03:00 INF] Request 6f1b7bbd completed: OPTIONS /api/v1/houses - 204 in 1ms {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/houses","ConnectionId":"0HNG1N1I2N5RL"}
[2025-10-02 16:41:32.082 +03:00 INF] Request e279f89f started: GET /api/v1/houses from ::1 {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/houses","ConnectionId":"0HNG1N1I2N5RL"}
[2025-10-02 16:41:32.203 +03:00 INF] Request e279f89f completed: GET /api/v1/houses - 200 in 121ms {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/houses","ConnectionId":"0HNG1N1I2N5RL"}
[2025-10-02 16:42:10.780 +03:00 INF] Request 55a62af1 started: GET /api/v1/translations/en from ::1 {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/en","ConnectionId":"0HNG1N1I2N5RL"}
[2025-10-02 16:42:10.788 +03:00 INF] Request 55a62af1 completed: GET /api/v1/translations/en - 200 in 7ms {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/en","ConnectionId":"0HNG1N1I2N5RL"}
[2025-10-02 16:42:10.956 +03:00 INF] Request 0a137127 started: OPTIONS /api/v1/houses from ::1 {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/houses","ConnectionId":"0HNG1N1I2N5RL"}
[2025-10-02 16:42:10.957 +03:00 INF] Request 0a137127 completed: OPTIONS /api/v1/houses - 204 in 1ms {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/houses","ConnectionId":"0HNG1N1I2N5RL"}
[2025-10-02 16:42:10.963 +03:00 INF] Request a930f9f7 started: GET /api/v1/houses from ::1 {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/houses","ConnectionId":"0HNG1N1I2N5RL"}
[2025-10-02 16:42:11.073 +03:00 INF] Request a930f9f7 completed: GET /api/v1/houses - 200 in 109ms {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/houses","ConnectionId":"0HNG1N1I2N5RL"}
[2025-10-02 16:42:17.402 +03:00 INF] Notification background service running... {"SourceContext":"AmesaBackend.Services.NotificationBackgroundService"}
