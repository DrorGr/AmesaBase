2025-10-02 15:58:25.860 +03:00 [WRN] The foreign key property 'LotteryDraw.HouseId1' was created in shadow state because a conflicting property with the simple name 'HouseId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 15:58:25.965 +03:00 [WRN] The foreign key property 'LotteryTicket.HouseId1' was created in shadow state because a conflicting property with the simple name 'HouseId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 15:58:25.968 +03:00 [WRN] The foreign key property 'LotteryTicket.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 15:58:25.968 +03:00 [WRN] The foreign key property 'Transaction.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 15:58:25.968 +03:00 [WRN] The foreign key property 'UserAddress.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 15:58:25.968 +03:00 [WRN] The foreign key property 'UserNotification.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 15:58:25.968 +03:00 [WRN] The foreign key property 'UserPaymentMethod.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 15:58:25.968 +03:00 [WRN] The foreign key property 'UserPhone.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 15:58:25.968 +03:00 [WRN] The foreign key property 'UserPromotion.PromotionId1' was created in shadow state because a conflicting property with the simple name 'PromotionId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 15:58:25.969 +03:00 [WRN] The foreign key property 'UserPromotion.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 15:58:25.969 +03:00 [WRN] The foreign key property 'UserSession.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 15:58:26.868 +03:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-10-02 15:58:27.167 +03:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-10-02 15:58:27.428 +03:00 [INF] Generated QR code for lottery result "3ef8d008-4edb-4935-b9df-0faa005dd556"
2025-10-02 15:58:27.483 +03:00 [INF] Generated QR code for lottery result "0df03e49-76bf-4263-a66b-6f6231629380"
2025-10-02 15:58:27.559 +03:00 [INF] Generated QR code for lottery result "53c8e837-3446-4d35-a885-bf5e252e7dca"
2025-10-02 15:58:27.560 +03:00 [INF] Generated QR code for lottery result "8bc0c84a-157a-4bde-b0b2-8b3ac9187354"
2025-10-02 15:58:27.561 +03:00 [INF] Generated QR code for lottery result "5c2fb4b6-08a7-46fa-a04b-1ae5fc9aaaea"
2025-10-02 15:58:27.561 +03:00 [INF] Generated QR code for lottery result "e0ba7035-604e-44fb-9054-181030d35de1"
2025-10-02 15:58:27.562 +03:00 [INF] Generated QR code for lottery result "04dd50e4-41c3-4c61-a3dc-5ffc11bee67b"
2025-10-02 15:58:27.563 +03:00 [INF] Generated QR code for lottery result "1f4a3625-b36c-4767-ad4c-cff5c31c7a98"
2025-10-02 15:58:27.564 +03:00 [INF] Generated QR code for lottery result "d041b408-bd44-4a3a-9ef5-4f48de056b38"
2025-10-02 15:58:28.034 +03:00 [ERR] Failed executing DbCommand (7ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Guid), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = Guid), @p8='?' (Size = 42), @p9='?' (DbType = Int32), @p10='?' (Size = 5), @p11='?' (DbType = Decimal), @p12='?' (Size = 297), @p13='?' (Size = 365), @p14='?' (DbType = DateTime), @p15='?' (DbType = DateTime), @p16='?' (Size = 13), @p17='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "lottery_results" ("Id", "ClaimNotes", "ClaimedAt", "CreatedAt", "DrawId", "IsClaimed", "IsVerified", "LotteryId", "PrizeDescription", "PrizePosition", "PrizeType", "PrizeValue", "QRCodeData", "QRCodeImageUrl", "ResultDate", "UpdatedAt", "WinnerTicketNumber", "WinnerUserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
2025-10-02 15:58:28.065 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'AmesaBackend.Data.AmesaDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-10-02 15:58:28.071 +03:00 [ERR] An error occurred while setting up the database
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at AmesaBackend.Services.LotteryResultsSeedingService.SeedLotteryResultsAsync(AmesaDbContext context, IQRCodeService qrCodeService) in C:\Users\dror0\Curser-Repos\AmesaBase\backend\AmesaBackend\Services\LotteryResultsSeedingService.cs:line 141
   at Program.<Main>$(String[] args) in C:\Users\dror0\Curser-Repos\AmesaBase\backend\AmesaBackend\Program.cs:line 236
2025-10-02 15:58:28.089 +03:00 [INF] Starting Amesa Lottery API
2025-10-02 15:58:28.186 +03:00 [INF] Lottery draw service running...
2025-10-02 15:58:28.191 +03:00 [INF] Notification background service running...
2025-10-02 15:58:29.796 +03:00 [INF] Request e6bded8b started: GET /api/v1/translations/en from ::1
2025-10-02 15:58:29.796 +03:00 [INF] Request 552667ae started: OPTIONS /api/v1/houses from ::1
2025-10-02 15:58:29.810 +03:00 [INF] Request 552667ae completed: OPTIONS /api/v1/houses - 204 in 25ms
2025-10-02 15:58:29.840 +03:00 [INF] Request f8b9f482 started: GET /api/v1/houses from ::1
2025-10-02 15:58:30.099 +03:00 [INF] Request e6bded8b completed: GET /api/v1/translations/en - 200 in 310ms
2025-10-02 15:58:30.682 +03:00 [INF] Request f8b9f482 completed: GET /api/v1/houses - 200 in 842ms
2025-10-02 15:58:47.644 +03:00 [INF] Request ec4c7adf started: GET /api/v1/translations/en from ::1
2025-10-02 15:58:47.754 +03:00 [INF] Request ec4c7adf completed: GET /api/v1/translations/en - 200 in 111ms
2025-10-02 15:59:24.147 +03:00 [INF] Request 4d3bf877 started: GET /api/v1/translations/en from ::1
2025-10-02 15:59:24.152 +03:00 [INF] Request 4d3bf877 completed: GET /api/v1/translations/en - 200 in 4ms
2025-10-02 15:59:24.218 +03:00 [INF] Request a7bdc567 started: OPTIONS /api/v1/houses from ::1
2025-10-02 15:59:24.219 +03:00 [INF] Request a7bdc567 completed: OPTIONS /api/v1/houses - 204 in 1ms
2025-10-02 15:59:24.236 +03:00 [INF] Request 3ad39dbe started: GET /api/v1/houses from ::1
2025-10-02 15:59:24.311 +03:00 [INF] Request 3ad39dbe completed: GET /api/v1/houses - 200 in 75ms
2025-10-02 15:59:28.205 +03:00 [INF] Notification background service running...
2025-10-02 15:59:36.828 +03:00 [INF] Request cc6788c7 started: GET /api/v1/translations/en from ::1
2025-10-02 15:59:36.830 +03:00 [INF] Request cc6788c7 completed: GET /api/v1/translations/en - 200 in 2ms
2025-10-02 15:59:36.904 +03:00 [INF] Request 5192e8fe started: OPTIONS /api/v1/houses from ::1
2025-10-02 15:59:36.905 +03:00 [INF] Request 5192e8fe completed: OPTIONS /api/v1/houses - 204 in 1ms
2025-10-02 15:59:36.917 +03:00 [INF] Request 7d71bcb7 started: GET /api/v1/houses from ::1
2025-10-02 15:59:36.994 +03:00 [INF] Request 7d71bcb7 completed: GET /api/v1/houses - 200 in 76ms
2025-10-02 15:59:44.567 +03:00 [INF] Request 1d6d94ee started: GET /api/v1/translations/en from ::1
2025-10-02 15:59:44.573 +03:00 [INF] Request 1d6d94ee completed: GET /api/v1/translations/en - 200 in 6ms
2025-10-02 15:59:44.626 +03:00 [INF] Request 12ce4f34 started: OPTIONS /api/v1/houses from ::1
2025-10-02 15:59:44.627 +03:00 [INF] Request 12ce4f34 completed: OPTIONS /api/v1/houses - 204 in 1ms
2025-10-02 15:59:44.636 +03:00 [INF] Request 10e74ecb started: GET /api/v1/houses from ::1
2025-10-02 15:59:44.706 +03:00 [INF] Request 10e74ecb completed: GET /api/v1/houses - 200 in 70ms
2025-10-02 15:59:50.111 +03:00 [INF] Request 6d95b1bd started: GET /api/v1/translations/en from ::1
2025-10-02 15:59:50.116 +03:00 [INF] Request 6d95b1bd completed: GET /api/v1/translations/en - 200 in 4ms
2025-10-02 15:59:50.212 +03:00 [INF] Request 8f3f37ec started: OPTIONS /api/v1/houses from ::1
2025-10-02 15:59:50.213 +03:00 [INF] Request 8f3f37ec completed: OPTIONS /api/v1/houses - 204 in 0ms
2025-10-02 15:59:50.221 +03:00 [INF] Request ebd61b55 started: GET /api/v1/houses from ::1
2025-10-02 15:59:50.307 +03:00 [INF] Request ebd61b55 completed: GET /api/v1/houses - 200 in 86ms
2025-10-02 15:59:55.715 +03:00 [INF] Request 9940fc5c started: GET /api/v1/translations/pl from ::1
2025-10-02 15:59:55.720 +03:00 [INF] Request 9940fc5c completed: GET /api/v1/translations/pl - 200 in 5ms
2025-10-02 15:59:57.024 +03:00 [INF] Request 133363c1 started: GET /api/v1/translations/en from ::1
2025-10-02 15:59:57.028 +03:00 [INF] Request 133363c1 completed: GET /api/v1/translations/en - 200 in 4ms
2025-10-02 15:59:58.391 +03:00 [INF] Request e4ade5ee started: GET /api/v1/translations/pl from ::1
2025-10-02 15:59:58.393 +03:00 [INF] Request e4ade5ee completed: GET /api/v1/translations/pl - 200 in 2ms
2025-10-02 16:00:00.566 +03:00 [INF] Request f34520e2 started: GET /api/v1/translations/en from ::1
2025-10-02 16:00:00.569 +03:00 [INF] Request f34520e2 completed: GET /api/v1/translations/en - 200 in 3ms
2025-10-02 16:00:08.415 +03:00 [INF] Request d429e0ba started: GET /api/v1/translations/pl from ::1
2025-10-02 16:00:08.417 +03:00 [INF] Request d429e0ba completed: GET /api/v1/translations/pl - 200 in 2ms
2025-10-02 16:00:12.392 +03:00 [INF] Request 763cfab9 started: GET /api/v1/translations/en from ::1
2025-10-02 16:00:12.395 +03:00 [INF] Request 763cfab9 completed: GET /api/v1/translations/en - 200 in 3ms
2025-10-02 16:00:14.719 +03:00 [INF] Request 1078ec28 started: GET /api/v1/translations/en from ::1
2025-10-02 16:00:14.726 +03:00 [INF] Request 1078ec28 completed: GET /api/v1/translations/en - 200 in 7ms
2025-10-02 16:00:14.788 +03:00 [INF] Request c95846d5 started: OPTIONS /api/v1/houses from ::1
2025-10-02 16:00:14.789 +03:00 [INF] Request c95846d5 completed: OPTIONS /api/v1/houses - 204 in 0ms
2025-10-02 16:00:14.795 +03:00 [INF] Request c8d7bf39 started: GET /api/v1/houses from ::1
2025-10-02 16:00:14.861 +03:00 [INF] Request c8d7bf39 completed: GET /api/v1/houses - 200 in 66ms
2025-10-02 16:00:18.534 +03:00 [INF] Request 7c5c4379 started: GET /api/v1/translations/pl from ::1
2025-10-02 16:00:18.538 +03:00 [INF] Request 7c5c4379 completed: GET /api/v1/translations/pl - 200 in 3ms
2025-10-02 16:00:19.761 +03:00 [INF] Request a63b34ea started: GET /api/v1/translations/en from ::1
2025-10-02 16:00:19.765 +03:00 [INF] Request a63b34ea completed: GET /api/v1/translations/en - 200 in 3ms
2025-10-02 16:00:21.326 +03:00 [INF] Request 04901e48 started: GET /api/v1/translations/pl from ::1
2025-10-02 16:00:21.334 +03:00 [INF] Request 04901e48 completed: GET /api/v1/translations/pl - 200 in 8ms
2025-10-02 16:00:22.601 +03:00 [INF] Request f3a9fac2 started: GET /api/v1/translations/en from ::1
2025-10-02 16:00:22.604 +03:00 [INF] Request f3a9fac2 completed: GET /api/v1/translations/en - 200 in 3ms
2025-10-02 16:00:28.211 +03:00 [INF] Notification background service running...
2025-10-02 16:01:28.220 +03:00 [INF] Notification background service running...
2025-10-02 16:02:28.233 +03:00 [INF] Notification background service running...
2025-10-02 16:03:28.191 +03:00 [INF] Lottery draw service running...
2025-10-02 16:03:28.240 +03:00 [INF] Notification background service running...
2025-10-02 16:04:07.287 +03:00 [INF] Request dbb755e2 started: GET /api/v1/translations/en from ::1
2025-10-02 16:04:07.295 +03:00 [INF] Request dbb755e2 completed: GET /api/v1/translations/en - 200 in 7ms
2025-10-02 16:04:07.594 +03:00 [INF] Request 598d9c91 started: OPTIONS /api/v1/houses from ::1
2025-10-02 16:04:07.595 +03:00 [INF] Request 598d9c91 completed: OPTIONS /api/v1/houses - 204 in 1ms
2025-10-02 16:04:07.599 +03:00 [INF] Request 065913bd started: GET /api/v1/houses from ::1
2025-10-02 16:04:07.719 +03:00 [INF] Request 065913bd completed: GET /api/v1/houses - 200 in 120ms
2025-10-02 16:04:28.251 +03:00 [INF] Notification background service running...
2025-10-02 16:04:46.095 +03:00 [INF] Request 744e1553 started: GET /api/v1/translations/en from ::1
2025-10-02 16:04:46.099 +03:00 [INF] Request 744e1553 completed: GET /api/v1/translations/en - 200 in 3ms
2025-10-02 16:04:46.180 +03:00 [INF] Request f8497eb6 started: OPTIONS /api/v1/houses from ::1
2025-10-02 16:04:46.181 +03:00 [INF] Request f8497eb6 completed: OPTIONS /api/v1/houses - 204 in 1ms
2025-10-02 16:04:46.197 +03:00 [INF] Request b2b23202 started: GET /api/v1/houses from ::1
2025-10-02 16:04:46.295 +03:00 [INF] Request b2b23202 completed: GET /api/v1/houses - 200 in 98ms
2025-10-02 16:04:48.318 +03:00 [INF] Request b7e15f60 started: GET /api/v1/translations/pl from ::1
2025-10-02 16:04:48.322 +03:00 [INF] Request b7e15f60 completed: GET /api/v1/translations/pl - 200 in 3ms
2025-10-02 16:04:52.507 +03:00 [INF] Request b72869fa started: GET /api/v1/translations/en from ::1
2025-10-02 16:04:52.514 +03:00 [INF] Request b72869fa completed: GET /api/v1/translations/en - 200 in 6ms
2025-10-02 16:05:28.260 +03:00 [INF] Notification background service running...
2025-10-02 16:05:37.316 +03:00 [INF] Request 363495af started: GET /api/v1/translations/pl from ::1
2025-10-02 16:05:37.318 +03:00 [INF] Request 363495af completed: GET /api/v1/translations/pl - 200 in 2ms
2025-10-02 16:05:38.689 +03:00 [INF] Request e43db8fa started: GET /api/v1/translations/en from ::1
2025-10-02 16:05:38.691 +03:00 [INF] Request e43db8fa completed: GET /api/v1/translations/en - 200 in 2ms
2025-10-02 16:06:28.262 +03:00 [INF] Notification background service running...
2025-10-02 16:06:41.712 +03:00 [INF] Request 349f3225 started: GET /api/v1/translations/en from ::1
2025-10-02 16:06:41.720 +03:00 [INF] Request 349f3225 completed: GET /api/v1/translations/en - 200 in 7ms
2025-10-02 16:07:28.272 +03:00 [INF] Notification background service running...
2025-10-02 16:08:28.204 +03:00 [INF] Lottery draw service running...
2025-10-02 16:08:28.281 +03:00 [INF] Notification background service running...
2025-10-02 16:09:28.289 +03:00 [INF] Notification background service running...
[2025-10-02 16:10:38.948 +03:00 WRN] The foreign key property 'LotteryDraw.HouseId1' was created in shadow state because a conflicting property with the simple name 'HouseId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 16:10:39.030 +03:00 WRN] The foreign key property 'LotteryTicket.HouseId1' was created in shadow state because a conflicting property with the simple name 'HouseId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 16:10:39.034 +03:00 WRN] The foreign key property 'LotteryTicket.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 16:10:39.035 +03:00 WRN] The foreign key property 'Transaction.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 16:10:39.035 +03:00 WRN] The foreign key property 'UserAddress.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 16:10:39.035 +03:00 WRN] The foreign key property 'UserNotification.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 16:10:39.035 +03:00 WRN] The foreign key property 'UserPaymentMethod.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 16:10:39.035 +03:00 WRN] The foreign key property 'UserPhone.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 16:10:39.036 +03:00 WRN] The foreign key property 'UserPromotion.PromotionId1' was created in shadow state because a conflicting property with the simple name 'PromotionId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 16:10:39.036 +03:00 WRN] The foreign key property 'UserPromotion.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 16:10:39.036 +03:00 WRN] The foreign key property 'UserSession.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 16:10:39.755 +03:00 WRN] The foreign key property 'LotteryDraw.HouseId1' was created in shadow state because a conflicting property with the simple name 'HouseId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 16:10:39.756 +03:00 WRN] The foreign key property 'LotteryTicket.HouseId1' was created in shadow state because a conflicting property with the simple name 'HouseId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 16:10:39.756 +03:00 WRN] The foreign key property 'LotteryTicket.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 16:10:39.757 +03:00 WRN] The foreign key property 'Transaction.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 16:10:39.757 +03:00 WRN] The foreign key property 'UserAddress.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 16:10:39.757 +03:00 WRN] The foreign key property 'UserNotification.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 16:10:39.758 +03:00 WRN] The foreign key property 'UserPaymentMethod.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 16:10:39.758 +03:00 WRN] The foreign key property 'UserPhone.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 16:10:39.758 +03:00 WRN] The foreign key property 'UserPromotion.PromotionId1' was created in shadow state because a conflicting property with the simple name 'PromotionId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 16:10:39.758 +03:00 WRN] The foreign key property 'UserPromotion.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 16:10:39.758 +03:00 WRN] The foreign key property 'UserSession.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 16:10:48.852 +03:00 WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased. {"EventId":{"Id":10102,"Name":"Microsoft.EntityFrameworkCore.Query.RowLimitingOperationWithoutOrderByWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Query"}
[2025-10-02 16:10:48.980 +03:00 WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased. {"EventId":{"Id":10102,"Name":"Microsoft.EntityFrameworkCore.Query.RowLimitingOperationWithoutOrderByWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Query"}
[2025-10-02 16:10:49.083 +03:00 INF] Generated QR code for lottery result "93d75fb3-72a9-4035-8754-0c39993ad7a9" {"SourceContext":"AmesaBackend.Services.QRCodeService"}
[2025-10-02 16:10:49.169 +03:00 INF] Generated QR code for lottery result "6b95ac5b-0379-4b92-be32-f76d6c7bcc50" {"SourceContext":"AmesaBackend.Services.QRCodeService"}
[2025-10-02 16:10:49.255 +03:00 INF] Generated QR code for lottery result "f005c3f2-d424-4ac8-a57b-f7477f4b3e82" {"SourceContext":"AmesaBackend.Services.QRCodeService"}
[2025-10-02 16:10:49.257 +03:00 INF] Generated QR code for lottery result "20247646-45a9-4ba7-b4d7-c7ee211aa048" {"SourceContext":"AmesaBackend.Services.QRCodeService"}
[2025-10-02 16:10:49.258 +03:00 INF] Generated QR code for lottery result "aa1089f0-05ae-4c91-8117-4209329b14d7" {"SourceContext":"AmesaBackend.Services.QRCodeService"}
[2025-10-02 16:10:49.258 +03:00 INF] Generated QR code for lottery result "67533077-52b3-4b7b-9494-c9c3da615228" {"SourceContext":"AmesaBackend.Services.QRCodeService"}
[2025-10-02 16:10:49.258 +03:00 INF] Generated QR code for lottery result "35415c03-36d2-45ab-bd15-1e87fd6a3fb4" {"SourceContext":"AmesaBackend.Services.QRCodeService"}
[2025-10-02 16:10:49.258 +03:00 INF] Generated QR code for lottery result "eff1c670-c8e6-40e1-9a98-1a087d21cbf1" {"SourceContext":"AmesaBackend.Services.QRCodeService"}
[2025-10-02 16:10:49.259 +03:00 INF] Generated QR code for lottery result "0f414103-0296-48ae-b7e3-8dc458c04909" {"SourceContext":"AmesaBackend.Services.QRCodeService"}
[2025-10-02 16:10:49.837 +03:00 ERR] Failed executing DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Guid), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = Guid), @p8='?' (Size = 36), @p9='?' (DbType = Int32), @p10='?' (Size = 7), @p11='?' (DbType = Decimal), @p12='?' (Size = 297), @p13='?' (Size = 361), @p14='?' (DbType = DateTime), @p15='?' (DbType = DateTime), @p16='?' (Size = 13), @p17='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "lottery_results" ("Id", "ClaimNotes", "ClaimedAt", "CreatedAt", "DrawId", "IsClaimed", "IsVerified", "LotteryId", "PrizeDescription", "PrizePosition", "PrizeType", "PrizeValue", "QRCodeData", "QRCodeImageUrl", "ResultDate", "UpdatedAt", "WinnerTicketNumber", "WinnerUserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17); {"EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command"}
[2025-10-02 16:10:49.879 +03:00 ERR] An exception occurred in the database while saving changes for context type 'AmesaBackend.Data.AmesaDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken) {"EventId":{"Id":10000,"Name":"Microsoft.EntityFrameworkCore.Update.SaveChangesFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Update"}
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
[2025-10-02 16:10:49.888 +03:00 ERR] An error occurred while setting up the database {}
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at AmesaBackend.Services.LotteryResultsSeedingService.SeedLotteryResultsAsync(AmesaDbContext context, IQRCodeService qrCodeService) in C:\Users\dror0\Curser-Repos\AmesaBase\backend\AmesaBackend\Services\LotteryResultsSeedingService.cs:line 141
   at Program.<Main>$(String[] args) in C:\Users\dror0\Curser-Repos\AmesaBase\backend\AmesaBackend\Program.cs:line 236
[2025-10-02 16:10:49.916 +03:00 INF] Starting Amesa Lottery API {}
[2025-10-02 16:10:50.044 +03:00 INF] Lottery draw service running... {"SourceContext":"AmesaBackend.Services.LotteryDrawService"}
[2025-10-02 16:10:50.054 +03:00 INF] Notification background service running... {"SourceContext":"AmesaBackend.Services.NotificationBackgroundService"}
[2025-10-02 16:10:50.571 +03:00 INF] Request df5c0e7c started: GET /api/v1/translations/en from ::1 {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/en","ConnectionId":"0HNG1MKE0B1UM"}
[2025-10-02 16:10:50.968 +03:00 INF] Request df5c0e7c completed: GET /api/v1/translations/en - 200 in 414ms {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/en","ConnectionId":"0HNG1MKE0B1UM"}
[2025-10-02 16:10:51.050 +03:00 INF] Request 6e184757 started: GET /api/v1/translations/en from ::1 {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/en","ConnectionId":"0HNG1MKE0B1UM"}
[2025-10-02 16:10:51.175 +03:00 INF] Request 6e184757 completed: GET /api/v1/translations/en - 200 in 125ms {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/en","ConnectionId":"0HNG1MKE0B1UM"}
[2025-10-02 16:11:25.980 +03:00 INF] Request afbc29d7 started: GET /api/v1/translations/en from ::1 {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/en","ConnectionId":"0HNG1MKE0B1UN"}
[2025-10-02 16:11:26.010 +03:00 INF] Request afbc29d7 completed: GET /api/v1/translations/en - 200 in 30ms {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/en","ConnectionId":"0HNG1MKE0B1UN"}
[2025-10-02 16:11:26.245 +03:00 INF] Request 8114d58d started: OPTIONS /api/v1/houses from ::1 {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/houses","ConnectionId":"0HNG1MKE0B1UN"}
[2025-10-02 16:11:26.249 +03:00 INF] Request 8114d58d completed: OPTIONS /api/v1/houses - 204 in 4ms {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/houses","ConnectionId":"0HNG1MKE0B1UN"}
[2025-10-02 16:11:26.259 +03:00 INF] Request f20fb7f8 started: GET /api/v1/houses from ::1 {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/houses","ConnectionId":"0HNG1MKE0B1UN"}
[2025-10-02 16:11:26.663 +03:00 INF] Request f20fb7f8 completed: GET /api/v1/houses - 200 in 404ms {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/houses","ConnectionId":"0HNG1MKE0B1UN"}
[2025-10-02 16:11:43.698 +03:00 INF] Request ec42bf2d started: GET /api/v1/translations/en from ::1 {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/en","ConnectionId":"0HNG1MKE0B1UN"}
[2025-10-02 16:11:43.701 +03:00 INF] Request ec42bf2d completed: GET /api/v1/translations/en - 200 in 3ms {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/en","ConnectionId":"0HNG1MKE0B1UN"}
[2025-10-02 16:11:43.781 +03:00 INF] Request f4f98677 started: OPTIONS /api/v1/houses from ::1 {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/houses","ConnectionId":"0HNG1MKE0B1UN"}
[2025-10-02 16:11:43.781 +03:00 INF] Request f4f98677 completed: OPTIONS /api/v1/houses - 204 in 0ms {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/houses","ConnectionId":"0HNG1MKE0B1UN"}
[2025-10-02 16:11:43.784 +03:00 INF] Request 170bb1b3 started: GET /api/v1/houses from ::1 {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/houses","ConnectionId":"0HNG1MKE0B1UN"}
[2025-10-02 16:11:43.845 +03:00 INF] Request 170bb1b3 completed: GET /api/v1/houses - 200 in 61ms {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/houses","ConnectionId":"0HNG1MKE0B1UN"}
[2025-10-02 16:11:50.056 +03:00 INF] Notification background service running... {"SourceContext":"AmesaBackend.Services.NotificationBackgroundService"}
[2025-10-02 16:12:22.837 +03:00 INF] Request 90c373f6 started: GET /api/v1/translations/en from ::1 {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/en","ConnectionId":"0HNG1MKE0B1UO"}
[2025-10-02 16:12:22.846 +03:00 INF] Request 90c373f6 completed: GET /api/v1/translations/en - 200 in 9ms {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/en","ConnectionId":"0HNG1MKE0B1UO"}
[2025-10-02 16:12:22.899 +03:00 INF] Request 35bba2cf started: GET /api/v1/translations/pl from ::1 {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/pl","ConnectionId":"0HNG1MKE0B1UO"}
[2025-10-02 16:12:22.907 +03:00 INF] Request 35bba2cf completed: GET /api/v1/translations/pl - 200 in 7ms {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/pl","ConnectionId":"0HNG1MKE0B1UO"}
[2025-10-02 16:12:49.604 +03:00 INF] Request 76be0e46 started: GET /api/v1/translations/pl from ::1 {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/pl","ConnectionId":"0HNG1MKE0B1UN"}
[2025-10-02 16:12:49.607 +03:00 INF] Request 76be0e46 completed: GET /api/v1/translations/pl - 200 in 3ms {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/pl","ConnectionId":"0HNG1MKE0B1UN"}
[2025-10-02 16:12:50.068 +03:00 INF] Notification background service running... {"SourceContext":"AmesaBackend.Services.NotificationBackgroundService"}
[2025-10-02 16:13:25.125 +03:00 INF] Request 7730ded7 started: GET /api/v1/translations/en from ::1 {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/en","ConnectionId":"0HNG1MKE0B1UN"}
[2025-10-02 16:13:25.128 +03:00 INF] Request 7730ded7 completed: GET /api/v1/translations/en - 200 in 2ms {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/en","ConnectionId":"0HNG1MKE0B1UN"}
[2025-10-02 16:13:27.532 +03:00 INF] Request 85d2b2ea started: GET /api/v1/translations/pl from ::1 {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/pl","ConnectionId":"0HNG1MKE0B1UN"}
[2025-10-02 16:13:27.539 +03:00 INF] Request 85d2b2ea completed: GET /api/v1/translations/pl - 200 in 6ms {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/pl","ConnectionId":"0HNG1MKE0B1UN"}
[2025-10-02 16:13:29.397 +03:00 INF] Request 1fc0538b started: GET /api/v1/translations/en from ::1 {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/en","ConnectionId":"0HNG1MKE0B1UN"}
[2025-10-02 16:13:29.407 +03:00 INF] Request 1fc0538b completed: GET /api/v1/translations/en - 200 in 10ms {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/en","ConnectionId":"0HNG1MKE0B1UN"}
[2025-10-02 16:13:49.137 +03:00 INF] Request 001c5a52 started: GET /api/v1/translations/pl from ::1 {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/pl","ConnectionId":"0HNG1MKE0B1UN"}
[2025-10-02 16:13:49.145 +03:00 INF] Request 001c5a52 completed: GET /api/v1/translations/pl - 200 in 8ms {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/pl","ConnectionId":"0HNG1MKE0B1UN"}
[2025-10-02 16:13:50.069 +03:00 INF] Notification background service running... {"SourceContext":"AmesaBackend.Services.NotificationBackgroundService"}
[2025-10-02 16:13:52.352 +03:00 INF] Request 12432743 started: GET /api/v1/translations/en from ::1 {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/en","ConnectionId":"0HNG1MKE0B1UN"}
[2025-10-02 16:13:52.362 +03:00 INF] Request 12432743 completed: GET /api/v1/translations/en - 200 in 10ms {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/en","ConnectionId":"0HNG1MKE0B1UN"}
[2025-10-02 16:13:53.281 +03:00 INF] Request 6ae4a4b3 started: GET /api/v1/translations/en from ::1 {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/en","ConnectionId":"0HNG1MKE0B1UP"}
[2025-10-02 16:13:53.292 +03:00 INF] Request 6ae4a4b3 completed: GET /api/v1/translations/en - 200 in 10ms {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/en","ConnectionId":"0HNG1MKE0B1UP"}
[2025-10-02 16:13:56.023 +03:00 INF] Request 68198626 started: GET /api/v1/translations/pl from ::1 {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/pl","ConnectionId":"0HNG1MKE0B1UN"}
[2025-10-02 16:13:56.031 +03:00 INF] Request 68198626 completed: GET /api/v1/translations/pl - 200 in 8ms {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/pl","ConnectionId":"0HNG1MKE0B1UN"}
[2025-10-02 16:13:59.298 +03:00 INF] Request e5164c9e started: GET /api/v1/translations/en from ::1 {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/en","ConnectionId":"0HNG1MKE0B1UN"}
[2025-10-02 16:13:59.302 +03:00 INF] Request e5164c9e completed: GET /api/v1/translations/en - 200 in 3ms {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/en","ConnectionId":"0HNG1MKE0B1UN"}
[2025-10-02 16:14:50.082 +03:00 INF] Notification background service running... {"SourceContext":"AmesaBackend.Services.NotificationBackgroundService"}
[2025-10-02 16:15:17.823 +03:00 INF] Request 1d2643b2 started: GET /api/v1/translations/en from ::1 {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/en","ConnectionId":"0HNG1MKE0B1UN"}
[2025-10-02 16:15:17.830 +03:00 INF] Request 1d2643b2 completed: GET /api/v1/translations/en - 200 in 7ms {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/en","ConnectionId":"0HNG1MKE0B1UN"}
[2025-10-02 16:15:18.084 +03:00 INF] Request e9fe404a started: OPTIONS /api/v1/houses from ::1 {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/houses","ConnectionId":"0HNG1MKE0B1UN"}
[2025-10-02 16:15:18.086 +03:00 INF] Request e9fe404a completed: OPTIONS /api/v1/houses - 204 in 1ms {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/houses","ConnectionId":"0HNG1MKE0B1UN"}
[2025-10-02 16:15:18.092 +03:00 INF] Request 359c2b18 started: GET /api/v1/houses from ::1 {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/houses","ConnectionId":"0HNG1MKE0B1UN"}
[2025-10-02 16:15:18.213 +03:00 INF] Request 359c2b18 completed: GET /api/v1/houses - 200 in 120ms {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/houses","ConnectionId":"0HNG1MKE0B1UN"}
[2025-10-02 16:15:28.645 +03:00 INF] Request b3a3d525 started: GET /api/v1/translations/en from ::1 {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/en","ConnectionId":"0HNG1MKE0B1UN"}
[2025-10-02 16:15:28.648 +03:00 INF] Request b3a3d525 completed: GET /api/v1/translations/en - 200 in 2ms {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/en","ConnectionId":"0HNG1MKE0B1UN"}
[2025-10-02 16:15:28.702 +03:00 INF] Request d9d70453 started: OPTIONS /api/v1/houses from ::1 {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/houses","ConnectionId":"0HNG1MKE0B1UN"}
[2025-10-02 16:15:28.703 +03:00 INF] Request d9d70453 completed: OPTIONS /api/v1/houses - 204 in 0ms {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/houses","ConnectionId":"0HNG1MKE0B1UN"}
[2025-10-02 16:15:28.708 +03:00 INF] Request 862367fc started: GET /api/v1/houses from ::1 {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/houses","ConnectionId":"0HNG1MKE0B1UN"}
[2025-10-02 16:15:28.747 +03:00 INF] Request 862367fc completed: GET /api/v1/houses - 200 in 38ms {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/houses","ConnectionId":"0HNG1MKE0B1UN"}
[2025-10-02 16:15:34.867 +03:00 INF] Request 621d40f1 started: GET /api/v1/translations/en from ::1 {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/en","ConnectionId":"0HNG1MKE0B1UN"}
[2025-10-02 16:15:34.879 +03:00 INF] Request 621d40f1 completed: GET /api/v1/translations/en - 200 in 12ms {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/en","ConnectionId":"0HNG1MKE0B1UN"}
[2025-10-02 16:15:35.185 +03:00 INF] Request d69bff0a started: OPTIONS /api/v1/houses from ::1 {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/houses","ConnectionId":"0HNG1MKE0B1UN"}
[2025-10-02 16:15:35.185 +03:00 INF] Request d69bff0a completed: OPTIONS /api/v1/houses - 204 in 0ms {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/houses","ConnectionId":"0HNG1MKE0B1UN"}
[2025-10-02 16:15:35.198 +03:00 INF] Request 03edf99b started: GET /api/v1/houses from ::1 {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/houses","ConnectionId":"0HNG1MKE0B1UN"}
[2025-10-02 16:15:35.284 +03:00 INF] Request 03edf99b completed: GET /api/v1/houses - 200 in 86ms {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/houses","ConnectionId":"0HNG1MKE0B1UN"}
[2025-10-02 16:15:50.048 +03:00 INF] Lottery draw service running... {"SourceContext":"AmesaBackend.Services.LotteryDrawService"}
[2025-10-02 16:15:50.092 +03:00 INF] Notification background service running... {"SourceContext":"AmesaBackend.Services.NotificationBackgroundService"}
