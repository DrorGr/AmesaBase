2025-10-02 16:10:38.948 +03:00 [WRN] The foreign key property 'LotteryDraw.HouseId1' was created in shadow state because a conflicting property with the simple name 'HouseId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 16:10:39.030 +03:00 [WRN] The foreign key property 'LotteryTicket.HouseId1' was created in shadow state because a conflicting property with the simple name 'HouseId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 16:10:39.034 +03:00 [WRN] The foreign key property 'LotteryTicket.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 16:10:39.035 +03:00 [WRN] The foreign key property 'Transaction.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 16:10:39.035 +03:00 [WRN] The foreign key property 'UserAddress.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 16:10:39.035 +03:00 [WRN] The foreign key property 'UserNotification.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 16:10:39.035 +03:00 [WRN] The foreign key property 'UserPaymentMethod.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 16:10:39.035 +03:00 [WRN] The foreign key property 'UserPhone.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 16:10:39.036 +03:00 [WRN] The foreign key property 'UserPromotion.PromotionId1' was created in shadow state because a conflicting property with the simple name 'PromotionId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 16:10:39.036 +03:00 [WRN] The foreign key property 'UserPromotion.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 16:10:39.036 +03:00 [WRN] The foreign key property 'UserSession.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 16:10:39.755 +03:00 [WRN] The foreign key property 'LotteryDraw.HouseId1' was created in shadow state because a conflicting property with the simple name 'HouseId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 16:10:39.756 +03:00 [WRN] The foreign key property 'LotteryTicket.HouseId1' was created in shadow state because a conflicting property with the simple name 'HouseId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 16:10:39.756 +03:00 [WRN] The foreign key property 'LotteryTicket.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 16:10:39.757 +03:00 [WRN] The foreign key property 'Transaction.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 16:10:39.757 +03:00 [WRN] The foreign key property 'UserAddress.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 16:10:39.757 +03:00 [WRN] The foreign key property 'UserNotification.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 16:10:39.758 +03:00 [WRN] The foreign key property 'UserPaymentMethod.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 16:10:39.758 +03:00 [WRN] The foreign key property 'UserPhone.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 16:10:39.758 +03:00 [WRN] The foreign key property 'UserPromotion.PromotionId1' was created in shadow state because a conflicting property with the simple name 'PromotionId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 16:10:39.758 +03:00 [WRN] The foreign key property 'UserPromotion.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 16:10:39.758 +03:00 [WRN] The foreign key property 'UserSession.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-02 16:10:48.852 +03:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-10-02 16:10:48.980 +03:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-10-02 16:10:49.083 +03:00 [INF] Generated QR code for lottery result "93d75fb3-72a9-4035-8754-0c39993ad7a9"
2025-10-02 16:10:49.169 +03:00 [INF] Generated QR code for lottery result "6b95ac5b-0379-4b92-be32-f76d6c7bcc50"
2025-10-02 16:10:49.255 +03:00 [INF] Generated QR code for lottery result "f005c3f2-d424-4ac8-a57b-f7477f4b3e82"
2025-10-02 16:10:49.257 +03:00 [INF] Generated QR code for lottery result "20247646-45a9-4ba7-b4d7-c7ee211aa048"
2025-10-02 16:10:49.258 +03:00 [INF] Generated QR code for lottery result "aa1089f0-05ae-4c91-8117-4209329b14d7"
2025-10-02 16:10:49.258 +03:00 [INF] Generated QR code for lottery result "67533077-52b3-4b7b-9494-c9c3da615228"
2025-10-02 16:10:49.258 +03:00 [INF] Generated QR code for lottery result "35415c03-36d2-45ab-bd15-1e87fd6a3fb4"
2025-10-02 16:10:49.258 +03:00 [INF] Generated QR code for lottery result "eff1c670-c8e6-40e1-9a98-1a087d21cbf1"
2025-10-02 16:10:49.259 +03:00 [INF] Generated QR code for lottery result "0f414103-0296-48ae-b7e3-8dc458c04909"
2025-10-02 16:10:49.837 +03:00 [ERR] Failed executing DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Guid), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = Guid), @p8='?' (Size = 36), @p9='?' (DbType = Int32), @p10='?' (Size = 7), @p11='?' (DbType = Decimal), @p12='?' (Size = 297), @p13='?' (Size = 361), @p14='?' (DbType = DateTime), @p15='?' (DbType = DateTime), @p16='?' (Size = 13), @p17='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "lottery_results" ("Id", "ClaimNotes", "ClaimedAt", "CreatedAt", "DrawId", "IsClaimed", "IsVerified", "LotteryId", "PrizeDescription", "PrizePosition", "PrizeType", "PrizeValue", "QRCodeData", "QRCodeImageUrl", "ResultDate", "UpdatedAt", "WinnerTicketNumber", "WinnerUserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
2025-10-02 16:10:49.879 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'AmesaBackend.Data.AmesaDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-10-02 16:10:49.888 +03:00 [ERR] An error occurred while setting up the database
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at AmesaBackend.Services.LotteryResultsSeedingService.SeedLotteryResultsAsync(AmesaDbContext context, IQRCodeService qrCodeService) in C:\Users\dror0\Curser-Repos\AmesaBase\backend\AmesaBackend\Services\LotteryResultsSeedingService.cs:line 141
   at Program.<Main>$(String[] args) in C:\Users\dror0\Curser-Repos\AmesaBase\backend\AmesaBackend\Program.cs:line 236
2025-10-02 16:10:49.916 +03:00 [INF] Starting Amesa Lottery API
2025-10-02 16:10:50.044 +03:00 [INF] Lottery draw service running...
2025-10-02 16:10:50.054 +03:00 [INF] Notification background service running...
2025-10-02 16:10:50.571 +03:00 [INF] Request df5c0e7c started: GET /api/v1/translations/en from ::1
2025-10-02 16:10:50.968 +03:00 [INF] Request df5c0e7c completed: GET /api/v1/translations/en - 200 in 414ms
2025-10-02 16:10:51.050 +03:00 [INF] Request 6e184757 started: GET /api/v1/translations/en from ::1
2025-10-02 16:10:51.175 +03:00 [INF] Request 6e184757 completed: GET /api/v1/translations/en - 200 in 125ms
2025-10-02 16:11:25.980 +03:00 [INF] Request afbc29d7 started: GET /api/v1/translations/en from ::1
2025-10-02 16:11:26.010 +03:00 [INF] Request afbc29d7 completed: GET /api/v1/translations/en - 200 in 30ms
2025-10-02 16:11:26.245 +03:00 [INF] Request 8114d58d started: OPTIONS /api/v1/houses from ::1
2025-10-02 16:11:26.249 +03:00 [INF] Request 8114d58d completed: OPTIONS /api/v1/houses - 204 in 4ms
2025-10-02 16:11:26.259 +03:00 [INF] Request f20fb7f8 started: GET /api/v1/houses from ::1
2025-10-02 16:11:26.663 +03:00 [INF] Request f20fb7f8 completed: GET /api/v1/houses - 200 in 404ms
2025-10-02 16:11:43.698 +03:00 [INF] Request ec42bf2d started: GET /api/v1/translations/en from ::1
2025-10-02 16:11:43.701 +03:00 [INF] Request ec42bf2d completed: GET /api/v1/translations/en - 200 in 3ms
2025-10-02 16:11:43.781 +03:00 [INF] Request f4f98677 started: OPTIONS /api/v1/houses from ::1
2025-10-02 16:11:43.781 +03:00 [INF] Request f4f98677 completed: OPTIONS /api/v1/houses - 204 in 0ms
2025-10-02 16:11:43.784 +03:00 [INF] Request 170bb1b3 started: GET /api/v1/houses from ::1
2025-10-02 16:11:43.845 +03:00 [INF] Request 170bb1b3 completed: GET /api/v1/houses - 200 in 61ms
2025-10-02 16:11:50.056 +03:00 [INF] Notification background service running...
2025-10-02 16:12:22.837 +03:00 [INF] Request 90c373f6 started: GET /api/v1/translations/en from ::1
2025-10-02 16:12:22.846 +03:00 [INF] Request 90c373f6 completed: GET /api/v1/translations/en - 200 in 9ms
2025-10-02 16:12:22.899 +03:00 [INF] Request 35bba2cf started: GET /api/v1/translations/pl from ::1
2025-10-02 16:12:22.907 +03:00 [INF] Request 35bba2cf completed: GET /api/v1/translations/pl - 200 in 7ms
2025-10-02 16:12:49.604 +03:00 [INF] Request 76be0e46 started: GET /api/v1/translations/pl from ::1
2025-10-02 16:12:49.607 +03:00 [INF] Request 76be0e46 completed: GET /api/v1/translations/pl - 200 in 3ms
2025-10-02 16:12:50.068 +03:00 [INF] Notification background service running...
2025-10-02 16:13:25.125 +03:00 [INF] Request 7730ded7 started: GET /api/v1/translations/en from ::1
2025-10-02 16:13:25.128 +03:00 [INF] Request 7730ded7 completed: GET /api/v1/translations/en - 200 in 2ms
2025-10-02 16:13:27.532 +03:00 [INF] Request 85d2b2ea started: GET /api/v1/translations/pl from ::1
2025-10-02 16:13:27.539 +03:00 [INF] Request 85d2b2ea completed: GET /api/v1/translations/pl - 200 in 6ms
2025-10-02 16:13:29.397 +03:00 [INF] Request 1fc0538b started: GET /api/v1/translations/en from ::1
2025-10-02 16:13:29.407 +03:00 [INF] Request 1fc0538b completed: GET /api/v1/translations/en - 200 in 10ms
2025-10-02 16:13:49.137 +03:00 [INF] Request 001c5a52 started: GET /api/v1/translations/pl from ::1
2025-10-02 16:13:49.145 +03:00 [INF] Request 001c5a52 completed: GET /api/v1/translations/pl - 200 in 8ms
2025-10-02 16:13:50.069 +03:00 [INF] Notification background service running...
2025-10-02 16:13:52.352 +03:00 [INF] Request 12432743 started: GET /api/v1/translations/en from ::1
2025-10-02 16:13:52.362 +03:00 [INF] Request 12432743 completed: GET /api/v1/translations/en - 200 in 10ms
2025-10-02 16:13:53.281 +03:00 [INF] Request 6ae4a4b3 started: GET /api/v1/translations/en from ::1
2025-10-02 16:13:53.292 +03:00 [INF] Request 6ae4a4b3 completed: GET /api/v1/translations/en - 200 in 10ms
2025-10-02 16:13:56.023 +03:00 [INF] Request 68198626 started: GET /api/v1/translations/pl from ::1
2025-10-02 16:13:56.031 +03:00 [INF] Request 68198626 completed: GET /api/v1/translations/pl - 200 in 8ms
2025-10-02 16:13:59.298 +03:00 [INF] Request e5164c9e started: GET /api/v1/translations/en from ::1
2025-10-02 16:13:59.302 +03:00 [INF] Request e5164c9e completed: GET /api/v1/translations/en - 200 in 3ms
2025-10-02 16:14:50.082 +03:00 [INF] Notification background service running...
2025-10-02 16:15:17.823 +03:00 [INF] Request 1d2643b2 started: GET /api/v1/translations/en from ::1
2025-10-02 16:15:17.830 +03:00 [INF] Request 1d2643b2 completed: GET /api/v1/translations/en - 200 in 7ms
2025-10-02 16:15:18.084 +03:00 [INF] Request e9fe404a started: OPTIONS /api/v1/houses from ::1
2025-10-02 16:15:18.086 +03:00 [INF] Request e9fe404a completed: OPTIONS /api/v1/houses - 204 in 1ms
2025-10-02 16:15:18.092 +03:00 [INF] Request 359c2b18 started: GET /api/v1/houses from ::1
2025-10-02 16:15:18.213 +03:00 [INF] Request 359c2b18 completed: GET /api/v1/houses - 200 in 120ms
2025-10-02 16:15:28.645 +03:00 [INF] Request b3a3d525 started: GET /api/v1/translations/en from ::1
2025-10-02 16:15:28.648 +03:00 [INF] Request b3a3d525 completed: GET /api/v1/translations/en - 200 in 2ms
2025-10-02 16:15:28.702 +03:00 [INF] Request d9d70453 started: OPTIONS /api/v1/houses from ::1
2025-10-02 16:15:28.703 +03:00 [INF] Request d9d70453 completed: OPTIONS /api/v1/houses - 204 in 0ms
2025-10-02 16:15:28.708 +03:00 [INF] Request 862367fc started: GET /api/v1/houses from ::1
2025-10-02 16:15:28.747 +03:00 [INF] Request 862367fc completed: GET /api/v1/houses - 200 in 38ms
2025-10-02 16:15:34.867 +03:00 [INF] Request 621d40f1 started: GET /api/v1/translations/en from ::1
2025-10-02 16:15:34.879 +03:00 [INF] Request 621d40f1 completed: GET /api/v1/translations/en - 200 in 12ms
2025-10-02 16:15:35.185 +03:00 [INF] Request d69bff0a started: OPTIONS /api/v1/houses from ::1
2025-10-02 16:15:35.185 +03:00 [INF] Request d69bff0a completed: OPTIONS /api/v1/houses - 204 in 0ms
2025-10-02 16:15:35.198 +03:00 [INF] Request 03edf99b started: GET /api/v1/houses from ::1
2025-10-02 16:15:35.284 +03:00 [INF] Request 03edf99b completed: GET /api/v1/houses - 200 in 86ms
2025-10-02 16:15:50.048 +03:00 [INF] Lottery draw service running...
2025-10-02 16:15:50.092 +03:00 [INF] Notification background service running...
[2025-10-02 16:16:14.206 +03:00 WRN] The foreign key property 'LotteryDraw.HouseId1' was created in shadow state because a conflicting property with the simple name 'HouseId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 16:16:14.307 +03:00 WRN] The foreign key property 'LotteryTicket.HouseId1' was created in shadow state because a conflicting property with the simple name 'HouseId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 16:16:14.311 +03:00 WRN] The foreign key property 'LotteryTicket.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 16:16:14.312 +03:00 WRN] The foreign key property 'Transaction.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 16:16:14.312 +03:00 WRN] The foreign key property 'UserAddress.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 16:16:14.313 +03:00 WRN] The foreign key property 'UserNotification.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 16:16:14.313 +03:00 WRN] The foreign key property 'UserPaymentMethod.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 16:16:14.313 +03:00 WRN] The foreign key property 'UserPhone.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 16:16:14.313 +03:00 WRN] The foreign key property 'UserPromotion.PromotionId1' was created in shadow state because a conflicting property with the simple name 'PromotionId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 16:16:14.313 +03:00 WRN] The foreign key property 'UserPromotion.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 16:16:14.313 +03:00 WRN] The foreign key property 'UserSession.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 16:16:15.703 +03:00 WRN] The foreign key property 'LotteryDraw.HouseId1' was created in shadow state because a conflicting property with the simple name 'HouseId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 16:16:15.705 +03:00 WRN] The foreign key property 'LotteryTicket.HouseId1' was created in shadow state because a conflicting property with the simple name 'HouseId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 16:16:15.706 +03:00 WRN] The foreign key property 'LotteryTicket.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 16:16:15.706 +03:00 WRN] The foreign key property 'Transaction.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 16:16:15.707 +03:00 WRN] The foreign key property 'UserAddress.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 16:16:15.707 +03:00 WRN] The foreign key property 'UserNotification.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 16:16:15.708 +03:00 WRN] The foreign key property 'UserPaymentMethod.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 16:16:15.708 +03:00 WRN] The foreign key property 'UserPhone.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 16:16:15.708 +03:00 WRN] The foreign key property 'UserPromotion.PromotionId1' was created in shadow state because a conflicting property with the simple name 'PromotionId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 16:16:15.709 +03:00 WRN] The foreign key property 'UserPromotion.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 16:16:15.709 +03:00 WRN] The foreign key property 'UserSession.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
[2025-10-02 16:16:25.620 +03:00 WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased. {"EventId":{"Id":10102,"Name":"Microsoft.EntityFrameworkCore.Query.RowLimitingOperationWithoutOrderByWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Query"}
[2025-10-02 16:16:25.722 +03:00 WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased. {"EventId":{"Id":10102,"Name":"Microsoft.EntityFrameworkCore.Query.RowLimitingOperationWithoutOrderByWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Query"}
[2025-10-02 16:16:25.850 +03:00 INF] Generated QR code for lottery result "90d67f82-8f9a-4cb1-8151-f230833d99b1" {"SourceContext":"AmesaBackend.Services.QRCodeService"}
[2025-10-02 16:16:25.919 +03:00 INF] Generated QR code for lottery result "d37eff33-58e1-412b-bbbb-ba64006e50a7" {"SourceContext":"AmesaBackend.Services.QRCodeService"}
[2025-10-02 16:16:26.011 +03:00 INF] Generated QR code for lottery result "cf5f740a-ef1b-4769-9b5b-209e8cca1104" {"SourceContext":"AmesaBackend.Services.QRCodeService"}
[2025-10-02 16:16:26.013 +03:00 INF] Generated QR code for lottery result "35dce98c-96a4-4f53-a677-59a7ae0c20f2" {"SourceContext":"AmesaBackend.Services.QRCodeService"}
[2025-10-02 16:16:26.013 +03:00 INF] Generated QR code for lottery result "e2a12f37-53bf-4850-be90-e1df7d4576ff" {"SourceContext":"AmesaBackend.Services.QRCodeService"}
[2025-10-02 16:16:26.014 +03:00 INF] Generated QR code for lottery result "a53c95f5-a2b5-4fec-9446-ad04e8d04654" {"SourceContext":"AmesaBackend.Services.QRCodeService"}
[2025-10-02 16:16:26.016 +03:00 INF] Generated QR code for lottery result "7c0f20eb-9111-4e9d-91f2-4b90e6083e2c" {"SourceContext":"AmesaBackend.Services.QRCodeService"}
[2025-10-02 16:16:26.018 +03:00 INF] Generated QR code for lottery result "1e5e10b3-78da-4613-981a-6c89563d3129" {"SourceContext":"AmesaBackend.Services.QRCodeService"}
[2025-10-02 16:16:26.020 +03:00 INF] Generated QR code for lottery result "e4ee79b5-da7d-4942-a3bf-602d92b49bee" {"SourceContext":"AmesaBackend.Services.QRCodeService"}
[2025-10-02 16:16:26.458 +03:00 ERR] Failed executing DbCommand (3ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Guid), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = Guid), @p8='?' (Size = 26), @p9='?' (DbType = Int32), @p10='?' (Size = 4), @p11='?' (DbType = Decimal), @p12='?' (Size = 297), @p13='?' (Size = 361), @p14='?' (DbType = DateTime), @p15='?' (DbType = DateTime), @p16='?' (Size = 13), @p17='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "lottery_results" ("Id", "ClaimNotes", "ClaimedAt", "CreatedAt", "DrawId", "IsClaimed", "IsVerified", "LotteryId", "PrizeDescription", "PrizePosition", "PrizeType", "PrizeValue", "QRCodeData", "QRCodeImageUrl", "ResultDate", "UpdatedAt", "WinnerTicketNumber", "WinnerUserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17); {"EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command"}
[2025-10-02 16:16:26.490 +03:00 ERR] An exception occurred in the database while saving changes for context type 'AmesaBackend.Data.AmesaDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken) {"EventId":{"Id":10000,"Name":"Microsoft.EntityFrameworkCore.Update.SaveChangesFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Update"}
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
[2025-10-02 16:16:26.498 +03:00 ERR] An error occurred while setting up the database {}
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at AmesaBackend.Services.LotteryResultsSeedingService.SeedLotteryResultsAsync(AmesaDbContext context, IQRCodeService qrCodeService) in C:\Users\dror0\Curser-Repos\AmesaBase\backend\AmesaBackend\Services\LotteryResultsSeedingService.cs:line 141
   at Program.<Main>$(String[] args) in C:\Users\dror0\Curser-Repos\AmesaBase\backend\AmesaBackend\Program.cs:line 236
[2025-10-02 16:16:26.522 +03:00 INF] Starting Amesa Lottery API {}
[2025-10-02 16:16:26.643 +03:00 INF] Lottery draw service running... {"SourceContext":"AmesaBackend.Services.LotteryDrawService"}
[2025-10-02 16:16:26.653 +03:00 INF] Notification background service running... {"SourceContext":"AmesaBackend.Services.NotificationBackgroundService"}
[2025-10-02 16:16:27.035 +03:00 INF] Request 203ec0eb started: GET /api/v1/translations/en from ::1 {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/en","ConnectionId":"0HNG1MNI9EEG6"}
[2025-10-02 16:16:27.306 +03:00 INF] Request 203ec0eb completed: GET /api/v1/translations/en - 200 in 283ms {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/en","ConnectionId":"0HNG1MNI9EEG6"}
[2025-10-02 16:16:27.533 +03:00 INF] Request 88edcec4 started: GET /api/v1/translations/pl from ::1 {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/pl","ConnectionId":"0HNG1MNI9EEG6"}
[2025-10-02 16:16:27.644 +03:00 INF] Request 88edcec4 completed: GET /api/v1/translations/pl - 200 in 110ms {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/pl","ConnectionId":"0HNG1MNI9EEG6"}
[2025-10-02 16:16:55.900 +03:00 INF] Request ab4f484c started: GET /api/v1/translations/en from ::1 {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/en","ConnectionId":"0HNG1MNI9EEG7"}
[2025-10-02 16:16:55.916 +03:00 INF] Request ab4f484c completed: GET /api/v1/translations/en - 200 in 15ms {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/en","ConnectionId":"0HNG1MNI9EEG7"}
[2025-10-02 16:17:26.667 +03:00 INF] Notification background service running... {"SourceContext":"AmesaBackend.Services.NotificationBackgroundService"}
[2025-10-02 16:17:35.226 +03:00 INF] Request 8879ad1e started: GET /api/v1/translations/en from ::1 {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/en","ConnectionId":"0HNG1MNI9EEG8"}
[2025-10-02 16:17:35.239 +03:00 INF] Request 8879ad1e completed: GET /api/v1/translations/en - 200 in 12ms {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/en","ConnectionId":"0HNG1MNI9EEG8"}
[2025-10-02 16:17:52.569 +03:00 INF] Request c73ce9ee started: GET /api/v1/translations/en from ::1 {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/en","ConnectionId":"0HNG1MNI9EEG9"}
[2025-10-02 16:17:52.582 +03:00 INF] Request c73ce9ee completed: GET /api/v1/translations/en - 200 in 12ms {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/en","ConnectionId":"0HNG1MNI9EEG9"}
[2025-10-02 16:18:26.675 +03:00 INF] Notification background service running... {"SourceContext":"AmesaBackend.Services.NotificationBackgroundService"}
[2025-10-02 16:19:26.691 +03:00 INF] Notification background service running... {"SourceContext":"AmesaBackend.Services.NotificationBackgroundService"}
[2025-10-02 16:20:09.746 +03:00 INF] Request e5553632 started: GET /api/v1/translations/en from ::1 {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/en","ConnectionId":"0HNG1MNI9EEGA"}
[2025-10-02 16:20:09.764 +03:00 INF] Request e5553632 completed: GET /api/v1/translations/en - 200 in 18ms {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/en","ConnectionId":"0HNG1MNI9EEGA"}
[2025-10-02 16:20:09.821 +03:00 INF] Request e1b855a2 started: OPTIONS /api/v1/houses from ::1 {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/houses","ConnectionId":"0HNG1MNI9EEGA"}
[2025-10-02 16:20:09.824 +03:00 INF] Request e1b855a2 completed: OPTIONS /api/v1/houses - 204 in 2ms {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/houses","ConnectionId":"0HNG1MNI9EEGA"}
[2025-10-02 16:20:09.827 +03:00 INF] Request 4a3cc1ef started: GET /api/v1/houses from ::1 {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/houses","ConnectionId":"0HNG1MNI9EEGA"}
[2025-10-02 16:20:10.181 +03:00 INF] Request 4a3cc1ef completed: GET /api/v1/houses - 200 in 354ms {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/houses","ConnectionId":"0HNG1MNI9EEGA"}
[2025-10-02 16:20:15.129 +03:00 INF] Request 055e73b0 started: GET /api/v1/translations/pl from ::1 {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/pl","ConnectionId":"0HNG1MNI9EEGA"}
[2025-10-02 16:20:15.133 +03:00 INF] Request 055e73b0 completed: GET /api/v1/translations/pl - 200 in 3ms {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/pl","ConnectionId":"0HNG1MNI9EEGA"}
[2025-10-02 16:20:22.662 +03:00 INF] Request 0be8fe2a started: GET /api/v1/translations/en from ::1 {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/en","ConnectionId":"0HNG1MNI9EEGA"}
[2025-10-02 16:20:22.665 +03:00 INF] Request 0be8fe2a completed: GET /api/v1/translations/en - 200 in 3ms {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/en","ConnectionId":"0HNG1MNI9EEGA"}
[2025-10-02 16:20:26.703 +03:00 INF] Notification background service running... {"SourceContext":"AmesaBackend.Services.NotificationBackgroundService"}
[2025-10-02 16:21:26.659 +03:00 INF] Lottery draw service running... {"SourceContext":"AmesaBackend.Services.LotteryDrawService"}
[2025-10-02 16:21:26.711 +03:00 INF] Notification background service running... {"SourceContext":"AmesaBackend.Services.NotificationBackgroundService"}
[2025-10-02 16:21:27.797 +03:00 INF] Request e22e6be3 started: GET /api/v1/translations/en from ::1 {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/en","ConnectionId":"0HNG1MNI9EEGB"}
[2025-10-02 16:21:27.804 +03:00 INF] Request e22e6be3 completed: GET /api/v1/translations/en - 200 in 7ms {"SourceContext":"AmesaBackend.Middleware.RequestLoggingMiddleware","RequestPath":"/api/v1/translations/en","ConnectionId":"0HNG1MNI9EEGB"}
